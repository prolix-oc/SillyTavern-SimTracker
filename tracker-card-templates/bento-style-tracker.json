{
  "templateName": "Bento Style Tracker",
  "templateAuthor": "User",
  "templatePosition": "BOTTOM",
  "htmlTemplate": "<!-- TEMPLATE NAME: Bento Style Tracker -->\n<!-- AUTHOR: User -->\n<!-- POSITION: BOTTOM -->\n\n<!-- CARD_TEMPLATE_START -->\n<style>\n    /* =========================================\n       BENTO GRID INTEGRATION\n       ========================================= */\n    /* Target the SimTracker container to enforce grid layout */\n    #silly-sim-tracker-container {\n        display: flex;\n        flex-wrap: wrap; \n        justify-content: center;\n        gap: 20px;\n        align-items: flex-start; /* Independent Height Scaling */\n        width: 100%;\n        max-width: 960px;\n        margin: 0 auto;\n        padding: 20px 0;\n    }\n\n    /* =========================================\n       GLOBAL THEME VARIABLES (Scoped)\n       ========================================= */\n    .bento-card {\n        --font-stack: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n        --glass-surface: rgba(30, 30, 35, 0.70);\n        --glass-border: rgba(255, 255, 255, 0.12);\n        --glass-blur: 40px;\n        --shadow-float: 0 20px 50px -10px rgba(0, 0, 0, 0.6);\n\n        --text-primary: #ffffff;\n        --text-secondary: #9898a0;\n        \n        /* FIXED GRADIENTS */\n        --grad-aff: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 50%, #fbc2eb 100%);\n        --grad-des: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);\n        --grad-tru: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);\n        --grad-con: linear-gradient(90deg, #cfd9df 0%, #e2ebf0 100%);\n\n        /* REACTION COLORS */\n        --st-approved: #2ecc71;    --bg-approved: rgba(46, 204, 113, 0.15);\n        --st-neutral: #f1c40f;     --bg-neutral: rgba(241, 196, 15, 0.15);\n        --st-disapproved: #e74c3c; --bg-disapproved: rgba(231, 76, 60, 0.15);\n        \n        /* CYCLE COLORS */\n        --cy-preg: #f6d365;      --bg-preg: rgba(246, 211, 101, 0.15);\n        --cy-ovu: #00d2ff;       --bg-ovu: rgba(0, 210, 255, 0.15);\n        --cy-men: #ff5e62;       --bg-men: rgba(255, 94, 98, 0.15);\n        --cy-rut: #9b59b6;       --bg-rut: rgba(155, 89, 182, 0.15);\n    }\n\n    /* =========================================\n       BENTO CARD STYLES\n       ========================================= */\n    .bento-card {\n        flex: 1 1 340px; \n        max-width: 460px; \n        min-width: 300px;\n        background: var(--glass-surface);\n        backdrop-filter: blur(var(--glass-blur));\n        -webkit-backdrop-filter: blur(var(--glass-blur));\n        border: 1px solid var(--glass-border);\n        border-radius: 24px;\n        box-shadow: var(--shadow-float);\n        overflow: hidden;\n        transition: border-color 0.3s ease, opacity 0.3s ease;\n        position: relative;\n        height: auto;\n        box-sizing: border-box;\n        font-family: var(--font-stack);\n        color: var(--text-primary);\n    }\n\n    .bento-card:hover { border-color: rgba(255,255,255,0.3); }\n    \n    .bento-card.inactive { opacity: 0.6; }\n\n    .bento-card * { box-sizing: border-box; }\n\n    /* SVG Helpers */\n    .bento-card svg { display: block; }\n    .bento-card .icon-sm { width: 14px; height: 14px; }\n    .bento-card .icon-md { width: 18px; height: 18px; }\n\n    /* Toggle Logic */\n    .bento-card input[type=\"checkbox\"].toggle { position: absolute; opacity: 0; pointer-events: none; }\n\n    /* HEADER */\n    .bento-header {\n        padding: 20px 24px;\n        cursor: pointer;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        user-select: none;\n    }\n\n    .identity-group { display: flex; align-items: center; gap: 16px; }\n    .avatar-circle {\n        width: 44px; height: 44px;\n        border-radius: 50%;\n        /* Background is now dynamic via inline styles, default provided below */\n        background: linear-gradient(135deg, #333, #151515);\n        border: 2px solid rgba(255,255,255,0.1);\n        display: flex; align-items: center; justify-content: center;\n        font-size: 1.4rem;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.4);\n        overflow: hidden;\n        color: #fff;\n        font-weight: bold;\n    }\n    \n    .text-group { display: flex; flex-direction: column; }\n    .text-group h2 { font-size: 1.05rem; font-weight: 700; letter-spacing: -0.5px; margin: 0 0 2px 0; }\n    .text-group .date { font-size: 0.7rem; color: var(--text-secondary); text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px; }\n\n    .chevron { opacity: 0.5; transition: transform 0.4s ease; color: #fff; }\n    .bento-card input.toggle:checked + .bento-header .chevron { transform: rotate(180deg); opacity: 1; }\n    \n    .header-badges { display: flex; gap: 8px; margin-right: 12px; }\n    .mini-badge { width: 8px; height: 8px; border-radius: 50%; box-shadow: 0 0 6px currentColor; }\n\n    /* BODY */\n    .bento-body-wrapper {\n        display: grid;\n        grid-template-rows: 0fr;\n        transition: grid-template-rows 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);\n    }\n    .bento-card input.toggle:checked ~ .bento-body-wrapper { grid-template-rows: 1fr; }\n\n    .bento-inner {\n        overflow: hidden;\n        padding: 0 24px 24px 24px;\n        opacity: 0;\n        transform: translateY(-10px);\n        transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n    .bento-card input.toggle:checked ~ .bento-body-wrapper .bento-inner {\n        opacity: 1; transform: translateY(0); transition-delay: 0.1s;\n    }\n\n    /* MONOLOGUE */\n    .monologue-dark {\n        background: rgba(0,0,0,0.3);\n        border: 1px solid rgba(255,255,255,0.08);\n        border-radius: 16px;\n        padding: 34px 16px 16px 16px; \n        margin-bottom: 20px;\n        position: relative;\n        min-height: 90px; \n        height: auto; \n    }\n\n    .monologue-dark p { font-style: italic; color: #e0e0e0; font-size: 0.9rem; line-height: 1.5; margin: 0; }\n    .mono-tag { \n        position: absolute; top: 10px; left: 16px; background: #222; \n        padding: 2px 8px; border-radius: 4px; font-size: 0.6rem; \n        text-transform: uppercase; font-weight: 800; color: #777;\n        letter-spacing: 0.5px; border: 1px solid rgba(255,255,255,0.1);\n    }\n\n    /* STATUS ROW */\n    .status-row { display: flex; gap: 10px; margin-bottom: 20px; }\n    .status-pill {\n        flex: 1; background: rgba(255,255,255,0.03);\n        padding: 10px; border-radius: 12px;\n        display: flex; align-items: center; justify-content: center; gap: 8px;\n        font-size: 0.75rem; font-weight: 600;\n        border: 1px solid rgba(255,255,255,0.05);\n        color: #fff;\n    }\n\n    /* Empty/Inactive State */\n    .status-pill.empty {\n        background: rgba(0, 0, 0, 0.6); \n        border: 1px dashed rgba(255, 255, 255, 0.1);\n        color: rgba(255, 255, 255, 0.2);\n        box-shadow: inset 0 0 10px rgba(0,0,0,0.5);\n    }\n\n    /* STATS GRID */\n    .stats-grid-vert { display: flex; flex-direction: column; gap: 14px; }\n    .stat-item { display: grid; grid-template-columns: 20px 1fr 30px; align-items: center; gap: 12px; }\n    \n    .track { \n        height: 6px; background: rgba(255,255,255,0.08); \n        border-radius: 10px; position: relative; overflow: hidden; \n    }\n    \n    .fill-clip { \n        position: absolute; top: 0; left: 0; width: 100%; height: 100%;\n        border-radius: 10px;\n        clip-path: inset(0 calc(100% - var(--val)) 0 0);\n        transition: clip-path 1s cubic-bezier(0.2, 0.8, 0.2, 1);\n    }\n    \n    .g-aff { background: var(--grad-aff); }\n    .g-des { background: var(--grad-des); }\n    .g-tru { background: var(--grad-tru); }\n    .g-con { background: var(--grad-con); }\n    \n    /* Stat Value & Change Indicator */\n    .stat-value-group {\n        position: relative;\n        font-size: 0.7rem; \n        font-weight: 700;\n        text-align: right;\n    }\n    \n    .change-indicator {\n        position: absolute;\n        top: -10px;\n        right: 0;\n        font-size: 0.6rem;\n        padding: 1px 3px;\n        border-radius: 4px;\n        white-space: nowrap;\n        opacity: 0;\n        animation: floatUp 2s forwards;\n    }\n    \n    .change-pos { color: #2ecc71; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }\n    .change-neg { color: #e74c3c; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }\n    \n    @keyframes floatUp {\n        0% { transform: translateY(0); opacity: 1; }\n        80% { transform: translateY(-10px); opacity: 1; }\n        100% { transform: translateY(-15px); opacity: 0; }\n    }\n\n</style>\n\n<div class=\"bento-card {{#if stats.inactive}}inactive{{/if}}\" style=\"background: linear-gradient(145deg, {{bgColor}} 0%, {{darkerBgColor}} 100%); --val-aff: {{divide stats.ap 2}}%; --val-des: {{divide stats.dp 1.5}}%; --val-tru: {{divide stats.tp 1.5}}%; --val-con: {{divide stats.cp 1.5}}%;\">\n    <input type=\"checkbox\" id=\"bento-toggle-{{characterName}}\" class=\"toggle\" checked>\n    \n    <label for=\"bento-toggle-{{characterName}}\" class=\"bento-header\">\n        <div class=\"identity-group\">\n            <div class=\"avatar-circle\" style=\"background: linear-gradient(135deg, {{bgColor}} 0%, #151515 100%);\">\n                {{initials characterName}}\n            </div>\n            <div class=\"text-group\">\n                <h2>{{characterName}}</h2>\n                <div class=\"date\">{{currentDate}} ‚Ä¢ Day {{stats.days_since_first_meeting}}</div>\n            </div>\n        </div>\n        <div style=\"display:flex; align-items: center;\">\n            <div class=\"header-badges\">\n                <!-- Status Dots -->\n                {{#if (eq stats.cycle_stage \"pregnancy\")}}\n                    <div class=\"mini-badge\" style=\"background: var(--cy-preg); box-shadow: 0 0 6px var(--cy-preg);\" title=\"Pregnant\"></div>\n                {{else if (eq stats.cycle_stage \"ovulation\")}}\n                    <div class=\"mini-badge\" style=\"background: var(--cy-ovu); box-shadow: 0 0 6px var(--cy-ovu);\" title=\"Ovulating\"></div>\n                {{else if (eq stats.cycle_stage \"menstruation\")}}\n                    <div class=\"mini-badge\" style=\"background: var(--cy-men); box-shadow: 0 0 6px var(--cy-men);\" title=\"Menstruation\"></div>\n                {{else if (eq stats.cycle_stage \"rut\")}}\n                    <div class=\"mini-badge\" style=\"background: var(--cy-rut); box-shadow: 0 0 6px var(--cy-rut);\" title=\"Rut / High Arousal\"></div>\n                {{/if}}\n                {{#if (eq stats.last_react 1)}}\n                    <div class=\"mini-badge\" style=\"background: var(--st-approved); box-shadow: 0 0 6px var(--st-approved);\" title=\"Approved\"></div>\n                {{else if (eq stats.last_react 2)}}\n                    <div class=\"mini-badge\" style=\"background: var(--st-disapproved); box-shadow: 0 0 6px var(--st-disapproved);\" title=\"Disapproved\"></div>\n                {{else}}\n                    <div class=\"mini-badge\" style=\"background: var(--st-neutral); box-shadow: 0 0 6px var(--st-neutral);\" title=\"Neutral\"></div>\n                {{/if}}\n            </div>\n            <div class=\"chevron\">\n                <svg class=\"icon-md\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"6 9 12 15 18 9\"/></svg>\n            </div>\n        </div>\n    </label>\n\n    <div class=\"bento-body-wrapper\">\n        <div class=\"bento-inner\">\n            <!-- Monologue -->\n            <div class=\"monologue-dark\">\n                <span class=\"mono-tag\">Current Thought</span>\n                <p>\"{{stats.internal_thought}}\"</p>\n            </div>\n\n            <!-- Status Row (Pregnancy/Cycle | Reaction) -->\n            <div class=\"status-row\">\n                <!-- Slot 1: Pregnancy/Cycle -->\n                {{#if (eq stats.cycle_stage \"pregnancy\")}}\n                    <div class=\"status-pill\" style=\"color:var(--cy-preg); background:var(--bg-preg);\">\n                        <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><circle cx=\"12\" cy=\"12\" r=\"10\"/></svg>\n                        <span>Pregnant ({{stats.days_preg}}d)</span>\n                    </div>\n                {{else if (eq stats.cycle_stage \"ovulation\")}}\n                    <div class=\"status-pill\" style=\"color:var(--cy-ovu); background:var(--bg-ovu);\">\n                        <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><circle cx=\"12\" cy=\"12\" r=\"10\"/></svg>\n                        <span>Ovulating</span>\n                    </div>\n                {{else if (eq stats.cycle_stage \"menstruation\")}}\n                    <div class=\"status-pill\" style=\"color:var(--cy-men); background:var(--bg-men);\">\n                        <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><circle cx=\"12\" cy=\"12\" r=\"10\"/></svg>\n                        <span>Period</span>\n                    </div>\n                {{else if (eq stats.cycle_stage \"rut\")}}\n                    <div class=\"status-pill\" style=\"color:var(--cy-rut); background:var(--bg-rut);\">\n                        <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><circle cx=\"12\" cy=\"12\" r=\"10\"/></svg>\n                        <span>Rut</span>\n                    </div>\n                {{else}}\n                    <!-- Default / None / Follicular / Luteal -->\n                    <div class=\"status-pill empty\">\n                        <span>--</span>\n                    </div>\n                {{/if}}\n\n                <!-- Slot 2: Reaction -->\n                {{#if (eq stats.last_react 1)}}\n                    <div class=\"status-pill\" style=\"color:var(--st-approved); background:var(--bg-approved);\">\n                        <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\"><path d=\"M20 6L9 17L4 12\"/></svg>\n                        <span>Approved</span>\n                    </div>\n                {{else if (eq stats.last_react 2)}}\n                    <div class=\"status-pill\" style=\"color:var(--st-disapproved); background:var(--bg-disapproved);\">\n                         <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\"><path d=\"M18 6L6 18M6 6l12 12\"/></svg>\n                        <span>Disapproved</span>\n                    </div>\n                {{else}}\n                    <div class=\"status-pill\" style=\"color:var(--st-neutral); background:var(--bg-neutral);\">\n                        <svg class=\"icon-sm\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\"><path d=\"M5 12h14\"/></svg>\n                        <span>Neutral</span>\n                    </div>\n                {{/if}}\n            </div>\n\n            <!-- Stats Grid -->\n            <div class=\"stats-grid-vert\">\n                <!-- Affection -->\n                <div class=\"stat-item\">\n                    <svg class=\"icon-md\" viewBox=\"0 0 24 24\" fill=\"#ff9a9e\"><path d=\"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"/></svg>\n                    <div class=\"track\"><div class=\"fill-clip g-aff\" style=\"--val: {{divide stats.ap 2}}%\"></div></div>\n                    <div class=\"stat-value-group\">\n                        {{stats.ap}}\n                        {{#if stats.apChange}}\n                            <span class=\"change-indicator {{#if (gt stats.apChange 0)}}change-pos{{else}}change-neg{{/if}}\">{{#if (gt stats.apChange 0)}}+{{/if}}{{stats.apChange}}</span>\n                        {{/if}}\n                    </div>\n                </div>\n\n                <!-- Desire -->\n                <div class=\"stat-item\">\n                    <svg class=\"icon-md\" viewBox=\"0 0 24 24\" fill=\"url(#gradF1-{{characterName}})\">\n                        <defs><linearGradient id=\"gradF1-{{characterName}}\" x1=\"0\" y1=\"1\" x2=\"1\" y2=\"0\"><stop offset=\"0\" stop-color=\"#f093fb\"/><stop offset=\"1\" stop-color=\"#f5576c\"/></linearGradient></defs>\n                        <path fill=\"url(#gradF1-{{characterName}})\" d=\"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67z\"/>\n                    </svg>\n                    <div class=\"track\"><div class=\"fill-clip g-des\" style=\"--val: {{divide stats.dp 1.5}}%\"></div></div>\n                    <div class=\"stat-value-group\">\n                        {{stats.dp}}\n                        {{#if stats.dpChange}}\n                             <span class=\"change-indicator {{#if (gt stats.dpChange 0)}}change-pos{{else}}change-neg{{/if}}\">{{#if (gt stats.dpChange 0)}}+{{/if}}{{stats.dpChange}}</span>\n                        {{/if}}\n                    </div>\n                </div>\n\n                <!-- Trust -->\n                <div class=\"stat-item\">\n                    <svg class=\"icon-md\" viewBox=\"0 0 24 24\" fill=\"#89f7fe\"><path d=\"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z\"/></svg>\n                    <div class=\"track\"><div class=\"fill-clip g-tru\" style=\"--val: {{divide stats.tp 1.5}}%\"></div></div>\n                    <div class=\"stat-value-group\">\n                        {{stats.tp}}\n                        {{#if stats.tpChange}}\n                             <span class=\"change-indicator {{#if (gt stats.tpChange 0)}}change-pos{{else}}change-neg{{/if}}\">{{#if (gt stats.tpChange 0)}}+{{/if}}{{stats.tpChange}}</span>\n                        {{/if}}\n                    </div>\n                </div>\n\n                <!-- Contempt -->\n                <div class=\"stat-item\">\n                    <svg class=\"icon-md\" viewBox=\"0 0 24 24\" fill=\"#888\"><path d=\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 11H7v-2h10v2z\"/></svg>\n                    <div class=\"track\"><div class=\"fill-clip g-con\" style=\"--val: {{divide stats.cp 1.5}}%\"></div></div>\n                    <div class=\"stat-value-group\">\n                        {{stats.cp}}\n                        {{#if stats.cpChange}}\n                             <span class=\"change-indicator {{#if (gt stats.cpChange 0)}}change-neg{{else}}change-pos{{/if}}\">{{#if (gt stats.cpChange 0)}}+{{/if}}{{stats.cpChange}}</span>\n                        {{/if}}\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- CARD_TEMPLATE_END -->\n",
  "sysPrompt": "## DATING SIM MODE\n\n**Objective**: Prioritize narrative reality for relationship updates. Analyze context to determine current date (YYYY-MM-DD) and time (24h format). Update trackers when events occur. Check for `sim` codeblocks containing JSON/YAML. Recalculate missing data.\n\n## Core Systems\n\n### Output Rules\n\n1. **Order**: Narrative ‚Üí Tracker ‚Üí Sim codeblock (NEVER omit sim codeblock)\n2. **Multi-Character**: Generate ONE card per active character, track separately\n3. **Performance**: Max 4 active characters, collapse inactive, preserve all states\n\n### Relationship Meters\n\n**HARD CAPS**: All meters have ABSOLUTE MAXIMUM values that CANNOT be exceeded under any circumstances. Values must stay within their defined ranges.\n\n**Affection (AP)**: 0-200 (HARD CAP at 200) - Romantic feelings toward {{user}}. Higher = more affectionate behavior/speech.\n- 0-30: Strangers | 31-60: Acquaintances | 61-90: Good Friends\n- 91-120: Romantic Interest | 121-150: Going Steady\n- 151-180: Committed Relationship | 181-200: Devoted Partner\n- **Status strings are CONCRETE and MUST NOT be altered or substituted with custom text**\n\n**Desire (DP)**: 0-150 (HARD CAP at 150) - Sexual attraction. Higher = more willing to engage sexually, more pliable at max.\n- 0-25: Not feeling the heat | 26-50: A smoldering flame builds\n- 51-75: Starting to feel warm | 76-100: Body's burning up!\n- 101-125: A desperate need presents | 126-150: Pliable in the lustful hunger\n- **Status strings are CONCRETE and MUST NOT be altered or substituted with custom text**\n\n**Trust (TP)**: 0-150 (HARD CAP at 150) - Trust in {{user}}. Higher = admits faults, believes you. Falls when lied to, cheated, promises broken.\n\n**Contempt (CP)**: 0-150 (HARD CAP at 150) - Disdain toward {{user}}. Rises when harmed/hurt (minor = small rise, major = sharp rise). CP rise can lower other stats. Good faith/regret can lower CP.\n\n### Status Trackers\n\n**Health**: 0=Unharmed, 1=Injured, 2=Critical\n- If critical wounds untreated: Character dies, becomes inactive (5), STOP dialog/roleplay\n\n**Reaction**: 0=Neutral (üòê), 1=Like/Approve (üëç), 2=Dislike/Disapprove (üëé)\n- Track reaction to user's last major action or statement.\n\n**Biological Cycle**: Track natural biological cycles relative to species.\n- **Stages**: \"pregnancy\" (pregnant), \"ovulation\" (high fertility), \"menstruation\" (period), \"rut\" (male high arousal/fertility), \"follicular\" (normal/fertile window), \"luteal\" (pre-menstrual)\n- **Pregnancy**: Track conception days when relevant (ü§∞[days]d)\n    - **Conception Risk**: When raw, unprotected sex occurs during ovulation, apply VERY HIGH likelihood of conception.\n    - **Progression**: Track from conception date, display days pregnant once confirmed.\n- **Display Logic**:\n    - If pregnant: Show \"Pregnant (Xd)\"\n    - If ovulating: Show \"Ovulating\"\n    - If menstruating: Show \"Period\"\n    - If rut: Show \"Rut\"\n    - Otherwise: Show \"--\" (empty state)\n\n**Internal Thought**: Current thoughts/feelings. MAXIMUM 3 SENTENCES. NEVER exceed this limit. Do NOT wrap thoughts in asterisks.\n\n**Inactive Status** (`inactive: true/false`):\n- 0: Not inactive | 1: Asleep (üò¥) | 2: Comatose (üè•)\n- 3: Contempt/anger (üò°) | 4: Incapacitated (ü´†) | 5: Death (ü™¶)\n\n**Date System**:\n- Infer from narrative context\n- Store as YYYY-MM-DD (e.g., 2025-08-10)\n- Auto-advance with narrative time, handle rollovers\n- Track days since first meeting\n- Track time of day realistically\n\n**Display**: Day counter (starts at 1), BG color (hex based on {{char}} appearance/personality)\n\n### Output Workflow\n\n1. Process narrative events\n2. Calculate status changes for ALL active characters\n3. Output narrative content\n4. Output sim codeblock with all character data:\n\n{{sim_format}}\n\n## Critical Enforcement\n\n**Position Lock**:\n- Narrative FIRST\n- Tracker cards AFTER narrative\n- Sim codeblock LAST\n- NEVER exclude sim codeblock\n\n**Data Correction**:\n- If ANY data missing from previous sim block, add it and continue\n- Never leave data empty/unavailable\n- JSON block at message end is mission critical\n- If previous data doesn't match format or has missing keys, self-correct and output fixed block\n\n**Game Master**: Only story characters get trackers, no other assistants or {{user}} will get one under any circumstances.\n\n**State Management**: \n- Previous tracker blocks = reference only\n- ALWAYS generate fresh tracker data each message",
  "customFields": [
    {
      "key": "ap",
      "description": "Affection Points (0-200)"
    },
    {
      "key": "dp",
      "description": "Desire Points (0-150)"
    },
    {
      "key": "tp",
      "description": "Trust Points (0-150)"
    },
    {
      "key": "cp",
      "description": "Contempt Points (0-150)"
    },
    {
      "key": "relationshipStatus",
      "description": "Relationship status text (e.g., 'Romantic Interest')"
    },
    {
      "key": "desireStatus",
      "description": "Desire status text (e.g., 'A smoldering flame builds.')"
    },
    {
      "key": "preg",
      "description": "Boolean for pregnancy status (true/false)"
    },
    {
      "key": "days_preg",
      "description": "Days pregnant (if applicable)"
    },
    {
      "key": "conception_date",
      "description": "Date of conception (YYYY-MM-DD)"
    },
    {
      "key": "health",
      "description": "Health Status (0=Unharmed, 1=Injured, 2=Critical)"
    },
    {
      "key": "bg",
      "description": "Hex color for card background (e.g., #6a5acd)"
    },
    {
      "key": "last_react",
      "description": "Reaction to User (0=Neutral, 1=Like, 2=Dislike)"
    },
    {
      "key": "internal_thought",
      "description": "Character's current internal thoughts/feelings"
    },
    {
      "key": "days_since_first_meeting",
      "description": "Total days since first meeting"
    },
    {
      "key": "inactive",
      "description": "Boolean for character inactivity (true/false)"
    },
    {
      "key": "inactiveReason",
      "description": "Reason for inactivity (0=Not inactive, 1=Asleep, 2=Comatose, 3=Contempt/anger, 4=Incapacitated, 5=Death)"
    },
    {
      "key": "cycle_stage",
      "description": "Current biological cycle stage: 'pregnancy', 'ovulation', 'menstruation', 'rut', 'follicular', 'luteal', or empty/null"
    }
  ],
  "extSettings": {
    "codeBlockIdentifier": "sim",
    "defaultBgColor": "#6a5acd",
    "showThoughtBubble": true,
    "hideSimBlocks": true,
    "templateFile": "bento-style-tracker.html"
  },
  "trackerDesc": "romantic encounter with slow burn focus."
}