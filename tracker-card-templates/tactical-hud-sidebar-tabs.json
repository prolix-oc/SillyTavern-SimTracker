{
  "templateName": "Tactical Combat HUD (Right w/ Tabs)",
  "templateAuthor": "SST",
  "templatePosition": "RIGHT",
  "tabsType": "toggle",
  "htmlTemplate": "<!-- TEMPLATE NAME: Tactical Combat HUD (Right Side with Tabs) -->\n<!-- AUTHOR: SST -->\n<!-- POSITION: RIGHT -->\n<!-- TABS_TYPE: toggle -->\n\n<!-- CARD_TEMPLATE_START -->\n<style>\n  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n     TACTICAL COMBAT HUD - Military/Mecha Cockpit Interface\n     A retro-futuristic targeting system aesthetic\n     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n  /* CSS Variables for easy theming */\n  .sim-tracker-container {\n    --hud-primary: #00ff88;\n    --hud-secondary: #00ccff;\n    --hud-warning: #ffaa00;\n    --hud-danger: #ff3366;\n    --hud-neutral: #8899aa;\n    --hud-bg: #0a0e14;\n    --hud-bg-panel: #0d1117;\n    --hud-border: #1a2633;\n    --hud-glow: rgba(0, 255, 136, 0.15);\n    --scanline-opacity: 0.03;\n  }\n\n  /* â”€â”€â”€ Base Container â”€â”€â”€ */\n  .sim-tracker-container {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr;\n    width: 100%;\n    position: relative;\n    height: 100%;\n    pointer-events: none !important;\n    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  }\n\n  .sim-tracker-tabs,\n  .sim-tracker-cards-wrapper {\n    grid-column: 1;\n    grid-row: 1;\n    position: relative;\n    height: 100%;\n    width: 100%;\n    pointer-events: none !important;\n  }\n\n  /* â”€â”€â”€ TABS: Docked Target Profiles â”€â”€â”€ */\n  .sim-tracker-tabs {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    justify-content: center;\n    align-items: flex-end;\n    padding-right: 0;\n    width: auto;\n    height: 100%;\n    pointer-events: none !important;\n  }\n\n  .sim-tracker-tab {\n    width: 52px;\n    height: 64px;\n    cursor: pointer;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    flex-shrink: 0;\n    margin-right: 6px;\n    pointer-events: auto !important;\n    position: relative;\n    transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1), filter 0.2s ease;\n    /* Hexagonal clip-path for sci-fi look */\n    clip-path: polygon(15% 0%, 85% 0%, 100% 25%, 100% 75%, 85% 100%, 15% 100%, 0% 75%, 0% 25%);\n    background: var(--hud-bg);\n    border: none;\n  }\n\n  .sim-tracker-tab::before {\n    content: '';\n    position: absolute;\n    inset: 2px;\n    clip-path: polygon(15% 0%, 85% 0%, 100% 25%, 100% 75%, 85% 100%, 15% 100%, 0% 75%, 0% 25%);\n    background: var(--hud-bg-panel);\n    z-index: 0;\n  }\n\n  .sim-tracker-tab::after {\n    content: 'DOCK';\n    position: absolute;\n    bottom: 4px;\n    font-size: 6px;\n    letter-spacing: 1px;\n    color: var(--hud-neutral);\n    opacity: 0.6;\n    z-index: 2;\n  }\n\n  .sim-tracker-tab.active {\n    transform: translateX(-340px);\n    filter: drop-shadow(0 0 8px var(--hud-primary));\n  }\n\n  .sim-tracker-tab.active::after {\n    content: 'LIVE';\n    color: var(--hud-primary);\n    opacity: 1;\n    animation: hud-blink 1.5s ease-in-out infinite;\n  }\n\n  .sim-tracker-tab:hover {\n    filter: brightness(1.3) drop-shadow(0 0 4px var(--hud-secondary));\n  }\n\n  .tab-target-icon {\n    width: 32px;\n    height: 32px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    z-index: 1;\n  }\n\n  .tab-target-icon .initials {\n    font-size: 14px;\n    font-weight: 700;\n    letter-spacing: 1px;\n    text-shadow: 0 0 8px currentColor;\n  }\n\n  .tab-threat-bar {\n    width: 28px;\n    height: 3px;\n    background: var(--hud-border);\n    margin-top: 4px;\n    position: relative;\n    z-index: 1;\n    overflow: hidden;\n  }\n\n  .tab-threat-fill {\n    height: 100%;\n    transition: width 0.3s ease;\n  }\n\n  /* â”€â”€â”€ CARDS WRAPPER â”€â”€â”€ */\n  .sim-tracker-cards-wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    pointer-events: none !important;\n  }\n\n  /* â”€â”€â”€ CARD: Main HUD Panel â”€â”€â”€ */\n  .sim-tracker-card {\n    width: 340px;\n    max-height: 85vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    position: absolute !important;\n    right: 0 !important;\n    top: 50%;\n    pointer-events: auto !important;\n    /* Angular cut corners */\n    clip-path: polygon(\n      0% 12px, 12px 0%, calc(100% - 12px) 0%, 100% 12px,\n      100% calc(100% - 12px), calc(100% - 12px) 100%, 12px 100%, 0% calc(100% - 12px)\n    );\n    background: var(--hud-bg);\n    transition: transform 0.35s cubic-bezier(0.16, 1, 0.3, 1), \n                opacity 0.3s ease, \n                visibility 0.3s ease;\n    transform: translateY(-50%) translateX(110%) !important;\n    opacity: 0;\n    visibility: hidden;\n  }\n\n  .sim-tracker-card.active {\n    transform: translateY(-50%) translateX(0) !important;\n    opacity: 1;\n    visibility: visible;\n  }\n\n  .sim-tracker-card.sliding-out {\n    transform: translateY(-50%) translateX(110%) !important;\n    opacity: 0;\n    visibility: hidden;\n  }\n\n  .sim-tracker-card.tab-hidden {\n    display: none !important;\n  }\n\n  /* Scanline overlay effect */\n  .sim-tracker-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: repeating-linear-gradient(\n      0deg,\n      transparent,\n      transparent 2px,\n      rgba(0, 0, 0, var(--scanline-opacity)) 2px,\n      rgba(0, 0, 0, var(--scanline-opacity)) 4px\n    );\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  /* Inner border glow */\n  .sim-tracker-card::after {\n    content: '';\n    position: absolute;\n    inset: 3px;\n    clip-path: polygon(\n      0% 10px, 10px 0%, calc(100% - 10px) 0%, 100% 10px,\n      100% calc(100% - 10px), calc(100% - 10px) 100%, 10px 100%, 0% calc(100% - 10px)\n    );\n    border: 1px solid var(--hud-border);\n    pointer-events: none;\n    z-index: 1;\n  }\n\n  .hud-inner {\n    position: relative;\n    z-index: 2;\n    padding: 16px;\n  }\n\n  /* Inactive overlay */\n  .narrative-inactive-overlay {\n    position: absolute;\n    inset: 0;\n    background: repeating-linear-gradient(\n      45deg,\n      rgba(0, 0, 0, 0.7),\n      rgba(0, 0, 0, 0.7) 10px,\n      rgba(20, 20, 20, 0.7) 10px,\n      rgba(20, 20, 20, 0.7) 20px\n    );\n    display: none;\n    z-index: 50;\n    pointer-events: none;\n  }\n\n  .narrative-inactive-overlay::after {\n    content: 'â—ˆ OFFLINE â—ˆ';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--hud-danger);\n    font-size: 14px;\n    font-weight: 700;\n    letter-spacing: 4px;\n    text-shadow: 0 0 20px var(--hud-danger);\n    animation: hud-blink 1s ease-in-out infinite;\n  }\n\n  .narrative-inactive .narrative-inactive-overlay {\n    display: block;\n  }\n\n  /* â”€â”€â”€ HEADER SECTION â”€â”€â”€ */\n  .hud-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 12px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid var(--hud-border);\n    position: relative;\n  }\n\n  .hud-header::after {\n    content: '';\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    width: 60px;\n    height: 2px;\n  }\n\n  .target-designation {\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n  }\n\n  .target-id {\n    font-size: 10px;\n    color: var(--hud-neutral);\n    letter-spacing: 2px;\n    text-transform: uppercase;\n  }\n\n  .target-name {\n    font-size: 18px;\n    font-weight: 700;\n    letter-spacing: 1px;\n    text-shadow: 0 0 10px currentColor;\n  }\n\n  .target-status {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n    gap: 4px;\n  }\n\n  .status-badge {\n    font-size: 9px;\n    padding: 3px 8px;\n    letter-spacing: 1px;\n    clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%);\n  }\n\n  .status-badge.online {\n    background: var(--hud-primary);\n    color: var(--hud-bg);\n  }\n\n  .status-badge.warning {\n    background: var(--hud-warning);\n    color: var(--hud-bg);\n  }\n\n  .status-badge.danger {\n    background: var(--hud-danger);\n    color: #fff;\n  }\n\n  .status-badge.offline {\n    background: var(--hud-neutral);\n    color: var(--hud-bg);\n  }\n\n  .status-icons {\n    font-size: 16px;\n    display: flex;\n    gap: 4px;\n  }\n\n  /* â”€â”€â”€ TIME DISPLAY â”€â”€â”€ */\n  .hud-time-bar {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 14px;\n    font-size: 10px;\n    color: var(--hud-neutral);\n  }\n\n  .time-segment {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    padding: 4px 8px;\n    background: rgba(255, 255, 255, 0.03);\n    border-left: 2px solid var(--hud-border);\n  }\n\n  .time-segment .label {\n    opacity: 0.6;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n  }\n\n  .time-segment .value {\n    font-weight: 600;\n  }\n\n  /* â”€â”€â”€ STAT METERS â”€â”€â”€ */\n  .hud-stats {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    margin-bottom: 16px;\n  }\n\n  .stat-row {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n  }\n\n  .stat-label-row {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 10px;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n  }\n\n  .stat-label {\n    color: var(--hud-neutral);\n  }\n\n  .stat-value-group {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n  }\n\n  .stat-value {\n    font-weight: 700;\n    font-size: 12px;\n  }\n\n  .stat-change {\n    font-size: 9px;\n    padding: 1px 4px;\n    font-weight: 600;\n  }\n\n  .stat-change.positive {\n    color: var(--hud-bg);\n    background: var(--hud-primary);\n  }\n\n  .stat-change.negative {\n    color: #fff;\n    background: var(--hud-danger);\n  }\n\n  .stat-meter {\n    height: 6px;\n    background: var(--hud-border);\n    position: relative;\n    overflow: hidden;\n  }\n\n  /* Diagonal stripe pattern for meter bg */\n  .stat-meter::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    background: repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 3px,\n      rgba(255, 255, 255, 0.02) 3px,\n      rgba(255, 255, 255, 0.02) 6px\n    );\n  }\n\n  .stat-fill {\n    height: 100%;\n    position: relative;\n    transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  /* Animated shine on stat bars */\n  .stat-fill::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 50%;\n    height: 100%;\n    background: linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.2),\n      transparent\n    );\n    animation: stat-shine 3s ease-in-out infinite;\n  }\n\n  /* Dual-direction meter for center-based stats */\n  .stat-meter.dual {\n    position: relative;\n  }\n\n  .stat-meter.dual .center-mark {\n    position: absolute;\n    left: 50%;\n    top: -2px;\n    bottom: -2px;\n    width: 2px;\n    background: var(--hud-neutral);\n    transform: translateX(-50%);\n    z-index: 3;\n  }\n\n  .stat-fill.from-center {\n    position: absolute;\n    top: 0;\n    height: 100%;\n  }\n\n  .stat-fill.from-center.positive-dir {\n    left: 50%;\n  }\n\n  .stat-fill.from-center.negative-dir {\n    right: 50%;\n  }\n\n  /* â”€â”€â”€ THOUGHT DISPLAY â”€â”€â”€ */\n  .hud-thought-section {\n    margin-bottom: 14px;\n  }\n\n  .thought-header {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 9px;\n    color: var(--hud-neutral);\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    margin-bottom: 6px;\n  }\n\n  .thought-header::before {\n    content: 'â—†';\n    font-size: 6px;\n  }\n\n  .thought-header::after {\n    content: '';\n    flex: 1;\n    height: 1px;\n    background: linear-gradient(90deg, var(--hud-border), transparent);\n  }\n\n  .thought-box {\n    background: rgba(0, 0, 0, 0.3);\n    border-left: 2px solid;\n    padding: 10px 12px;\n    font-size: 12px;\n    line-height: 1.5;\n    color: rgba(255, 255, 255, 0.85);\n    position: relative;\n  }\n\n  .thought-box::before {\n    content: '\"';\n    position: absolute;\n    top: 4px;\n    left: 6px;\n    font-size: 20px;\n    opacity: 0.2;\n  }\n\n  /* â”€â”€â”€ DATA SECTIONS â”€â”€â”€ */\n  .hud-section {\n    margin-bottom: 14px;\n  }\n\n  .section-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    font-size: 9px;\n    color: var(--hud-neutral);\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    margin-bottom: 8px;\n    padding-bottom: 4px;\n    border-bottom: 1px dashed var(--hud-border);\n  }\n\n  .section-header .icon {\n    font-size: 10px;\n  }\n\n  .section-header .count {\n    margin-left: auto;\n    background: var(--hud-border);\n    padding: 2px 6px;\n    font-size: 8px;\n    font-weight: 700;\n  }\n\n  .data-list {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n  }\n\n  .data-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 6px 10px;\n    background: rgba(255, 255, 255, 0.02);\n    font-size: 11px;\n    border-left: 2px solid var(--hud-border);\n    transition: border-color 0.2s ease, background 0.2s ease;\n  }\n\n  .data-item:hover {\n    border-left-color: var(--hud-secondary);\n    background: rgba(0, 204, 255, 0.05);\n  }\n\n  .data-item .name {\n    color: rgba(255, 255, 255, 0.9);\n  }\n\n  .data-item .value {\n    font-weight: 600;\n    font-size: 10px;\n  }\n\n  .data-item .value.positive {\n    color: var(--hud-primary);\n  }\n\n  .data-item .value.negative {\n    color: var(--hud-danger);\n  }\n\n  .data-item .value.neutral {\n    color: var(--hud-neutral);\n  }\n\n  /* Goal items with checkbox style */\n  .goal-item {\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    padding: 6px 10px;\n    background: rgba(255, 255, 255, 0.02);\n    font-size: 11px;\n    border-left: 2px solid var(--hud-warning);\n  }\n\n  .goal-item::before {\n    content: 'â—‡';\n    color: var(--hud-warning);\n    font-size: 8px;\n    margin-top: 2px;\n  }\n\n  .goal-item .text {\n    color: rgba(255, 255, 255, 0.85);\n    line-height: 1.4;\n  }\n\n  /* Belonging items */\n  .belonging-item {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    padding: 4px 10px;\n    background: rgba(255, 255, 255, 0.03);\n    font-size: 10px;\n    color: rgba(255, 255, 255, 0.8);\n    margin-right: 4px;\n    margin-bottom: 4px;\n    border: 1px solid var(--hud-border);\n  }\n\n  .belonging-item::before {\n    content: 'â–ª';\n    color: var(--hud-secondary);\n    font-size: 6px;\n  }\n\n  .belongings-grid {\n    display: flex;\n    flex-wrap: wrap;\n  }\n\n  /* â”€â”€â”€ SCROLLBAR â”€â”€â”€ */\n  .sim-tracker-card::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  .sim-tracker-card::-webkit-scrollbar-track {\n    background: var(--hud-bg);\n  }\n\n  .sim-tracker-card::-webkit-scrollbar-thumb {\n    background: var(--hud-border);\n  }\n\n  .sim-tracker-card::-webkit-scrollbar-thumb:hover {\n    background: var(--hud-neutral);\n  }\n\n  /* â”€â”€â”€ ANIMATIONS â”€â”€â”€ */\n  @keyframes hud-blink {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.4; }\n  }\n\n  @keyframes stat-shine {\n    0% { left: -100%; }\n    50%, 100% { left: 150%; }\n  }\n\n  @keyframes pulse-glow {\n    0%, 100% { box-shadow: 0 0 4px currentColor; }\n    50% { box-shadow: 0 0 12px currentColor; }\n  }\n\n  /* Threat level color classes */\n  .threat-friendly { color: var(--hud-primary); }\n  .threat-neutral { color: var(--hud-secondary); }\n  .threat-caution { color: var(--hud-warning); }\n  .threat-hostile { color: var(--hud-danger); }\n\n  .bg-friendly { background: var(--hud-primary); }\n  .bg-neutral-tone { background: var(--hud-secondary); }\n  .bg-caution { background: var(--hud-warning); }\n  .bg-hostile { background: var(--hud-danger); }\n  .bg-health { background: linear-gradient(90deg, var(--hud-danger), var(--hud-warning), var(--hud-primary)); }\n</style>\n\n<div class=\"sim-tracker-container\">\n  <!-- â•â•â• TABS: Target Dock â•â•â• -->\n  <div class=\"sim-tracker-tabs\">\n    {{#each characters}}\n    <div\n      class=\"sim-tracker-tab\"\n      data-character=\"{{@index}}\"\n      style=\"background: {{adjustColorBrightness bgColor 30}};\"\n    >\n      <div class=\"tab-target-icon\" style=\"color: {{adjustColorBrightness bgColor 140}};\">\n        <span class=\"initials\">{{initials characterName}}</span>\n      </div>\n      <div class=\"tab-threat-bar\">\n        <div class=\"tab-threat-fill\" style=\"\n          width: {{#if stats.affinity}}{{add (divide stats.affinity 2) 50}}%{{else}}50%{{/if}};\n          background: {{#if (gte stats.affinity 40)}}var(--hud-primary){{else if (gte stats.affinity 0)}}var(--hud-secondary){{else if (gte stats.affinity -40)}}var(--hud-warning){{else}}var(--hud-danger){{/if}};\n        \"></div>\n      </div>\n    </div>\n    {{/each}}\n  </div>\n\n  <!-- â•â•â• CARDS: HUD Panels â•â•â• -->\n  <div class=\"sim-tracker-cards-wrapper\">\n    {{#each characters}}\n    <div\n      class=\"sim-tracker-card {{#if stats.inactive}}narrative-inactive{{/if}}\"\n      data-character=\"{{@index}}\"\n      style=\"--accent: {{adjustColorBrightness bgColor 120}};\"\n    >\n      <div class=\"narrative-inactive-overlay\"></div>\n\n      <div class=\"hud-inner\">\n        <!-- â”€â”€â”€ HEADER â”€â”€â”€ -->\n        <div class=\"hud-header\" style=\"border-color: {{adjustColorBrightness bgColor 60}};\">\n          <div class=\"target-designation\">\n            <span class=\"target-id\">TARGET-{{@index}}</span>\n            <span class=\"target-name\" style=\"color: {{adjustColorBrightness bgColor 140}};\">{{characterName}}</span>\n          </div>\n          <div class=\"target-status\">\n            {{#if stats.inactive}}\n              <span class=\"status-badge offline\">OFFLINE</span>\n            {{else if (lt stats.health 30)}}\n              <span class=\"status-badge danger\">CRITICAL</span>\n            {{else if (lt stats.health 60)}}\n              <span class=\"status-badge warning\">DAMAGED</span>\n            {{else}}\n              <span class=\"status-badge online\">NOMINAL</span>\n            {{/if}}\n            <div class=\"status-icons\">\n              {{#if stats.narrativeStatus}}{{stats.narrativeStatus}}{{/if}}\n              {{#if stats.preg}}ğŸ¤°{{/if}}\n              {{#if stats.reactionIcon}}{{stats.reactionIcon}}{{/if}}\n            </div>\n          </div>\n        </div>\n\n        <!-- â”€â”€â”€ TIME BAR â”€â”€â”€ -->\n        <div class=\"hud-time-bar\">\n          <div class=\"time-segment\">\n            <span class=\"label\">Date</span>\n            <span class=\"value\">{{#if currentDateTime}}{{currentDateTime}}{{else}}DAY {{stats.days_since_first_meeting}}{{/if}}</span>\n          </div>\n          {{#if stats.time_known}}\n          <div class=\"time-segment\">\n            <span class=\"label\">Contact</span>\n            <span class=\"value\">{{stats.time_known}}</span>\n          </div>\n          {{/if}}\n        </div>\n\n        <!-- â”€â”€â”€ STAT METERS â”€â”€â”€ -->\n        <div class=\"hud-stats\">\n          <!-- Affinity (dual-direction: -100 to +100) -->\n          <div class=\"stat-row\">\n            <div class=\"stat-label-row\">\n              <span class=\"stat-label\">â–¸ Affinity Index</span>\n              <div class=\"stat-value-group\">\n                <span class=\"stat-value {{#if (gte stats.affinity 40)}}threat-friendly{{else if (gte stats.affinity 0)}}threat-neutral{{else if (gte stats.affinity -40)}}threat-caution{{else}}threat-hostile{{/if}}\">{{stats.affinity}}</span>\n                {{#if stats.affinityChange}}{{#unless (eq stats.affinityChange 0)}}\n                <span class=\"stat-change {{#if (gt stats.affinityChange 0)}}positive{{else}}negative{{/if}}\">{{#if (gt stats.affinityChange 0)}}+{{/if}}{{stats.affinityChange}}</span>\n                {{/unless}}{{/if}}\n              </div>\n            </div>\n            <div class=\"stat-meter dual\">\n              <div class=\"center-mark\"></div>\n              {{#if (gte stats.affinity 0)}}\n              <div class=\"stat-fill from-center positive-dir bg-friendly\" style=\"width: {{divide stats.affinity 2}}%;\"></div>\n              {{else}}\n              <div class=\"stat-fill from-center negative-dir bg-hostile\" style=\"width: {{divide (abs stats.affinity) 2}}%;\"></div>\n              {{/if}}\n            </div>\n          </div>\n\n          <!-- Desire (dual-direction: -100 to +100) -->\n          <div class=\"stat-row\">\n            <div class=\"stat-label-row\">\n              <span class=\"stat-label\">â–¸ Desire Level</span>\n              <div class=\"stat-value-group\">\n                <span class=\"stat-value\" style=\"color: {{#if (gte stats.desire 40)}}var(--hud-danger){{else if (gte stats.desire 0)}}var(--hud-warning){{else}}var(--hud-secondary){{/if}};\">{{stats.desire}}</span>\n                {{#if stats.desireChange}}{{#unless (eq stats.desireChange 0)}}\n                <span class=\"stat-change {{#if (gt stats.desireChange 0)}}positive{{else}}negative{{/if}}\">{{#if (gt stats.desireChange 0)}}+{{/if}}{{stats.desireChange}}</span>\n                {{/unless}}{{/if}}\n              </div>\n            </div>\n            <div class=\"stat-meter dual\">\n              <div class=\"center-mark\"></div>\n              {{#if (gte stats.desire 0)}}\n              <div class=\"stat-fill from-center positive-dir\" style=\"width: {{divide stats.desire 2}}%; background: linear-gradient(90deg, var(--hud-warning), var(--hud-danger));\"></div>\n              {{else}}\n              <div class=\"stat-fill from-center negative-dir\" style=\"width: {{divide (abs stats.desire) 2}}%; background: var(--hud-secondary);\"></div>\n              {{/if}}\n            </div>\n          </div>\n\n          <!-- Health (0-100) -->\n          <div class=\"stat-row\">\n            <div class=\"stat-label-row\">\n              <span class=\"stat-label\">â–¸ Vitality Status</span>\n              <div class=\"stat-value-group\">\n                <span class=\"stat-value {{#if (gte stats.health 60)}}threat-friendly{{else if (gte stats.health 30)}}threat-caution{{else}}threat-hostile{{/if}}\">{{stats.health}}%</span>\n                {{#if stats.healthChange}}{{#unless (eq stats.healthChange 0)}}\n                <span class=\"stat-change {{#if (gt stats.healthChange 0)}}positive{{else}}negative{{/if}}\">{{#if (gt stats.healthChange 0)}}+{{/if}}{{stats.healthChange}}</span>\n                {{/unless}}{{/if}}\n              </div>\n            </div>\n            <div class=\"stat-meter\">\n              <div class=\"stat-fill bg-health\" style=\"width: {{stats.health}}%;\"></div>\n            </div>\n          </div>\n        </div>\n\n        <!-- â”€â”€â”€ THOUGHT INTERCEPT â”€â”€â”€ -->\n        {{#if stats.internal_thought}}\n        <div class=\"hud-thought-section\">\n          <div class=\"thought-header\">Signal Intercept</div>\n          <div class=\"thought-box\" style=\"border-color: {{adjustColorBrightness bgColor 80}};\">\n            {{stats.internal_thought}}\n          </div>\n        </div>\n        {{/if}}\n\n        <!-- â”€â”€â”€ CONNECTIONS â”€â”€â”€ -->\n        {{#if stats.connections}}\n        <div class=\"hud-section\">\n          <div class=\"section-header\">\n            <span class=\"icon\">â—ˆ</span>\n            <span>Network Links</span>\n            <span class=\"count\">{{stats.connections.length}}</span>\n          </div>\n          <div class=\"data-list\">\n            {{#each stats.connections}}\n            <div class=\"data-item\">\n              <span class=\"name\">{{this.name}}</span>\n              <span class=\"value {{#if (gte this.affinity 20)}}positive{{else if (lte this.affinity -20)}}negative{{else}}neutral{{/if}}\">{{this.affinity}}</span>\n            </div>\n            {{/each}}\n          </div>\n        </div>\n        {{/if}}\n\n        <!-- â”€â”€â”€ BELONGINGS â”€â”€â”€ -->\n        {{#if stats.belongings}}\n        <div class=\"hud-section\">\n          <div class=\"section-header\">\n            <span class=\"icon\">â—ˆ</span>\n            <span>Inventory Scan</span>\n            <span class=\"count\">{{stats.belongings.length}}</span>\n          </div>\n          <div class=\"belongings-grid\">\n            {{#each stats.belongings}}\n            <span class=\"belonging-item\">{{this}}</span>\n            {{/each}}\n          </div>\n        </div>\n        {{/if}}\n\n        <!-- â”€â”€â”€ GOALS â”€â”€â”€ -->\n        {{#if stats.goals}}\n        <div class=\"hud-section\">\n          <div class=\"section-header\">\n            <span class=\"icon\">â—ˆ</span>\n            <span>Objective Matrix</span>\n            <span class=\"count\">{{stats.goals.length}}</span>\n          </div>\n          <div class=\"data-list\">\n            {{#each stats.goals}}\n            <div class=\"goal-item\">\n              <span class=\"text\">{{this}}</span>\n            </div>\n            {{/each}}\n          </div>\n        </div>\n        {{/if}}\n\n      </div>\n    </div>\n    {{/each}}\n  </div>\n</div>\n<!-- CARD_TEMPLATE_END -->\n\n<!--\nTACTICAL HUD TEMPLATE VARIABLES:\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n{{characters}}              - Array of character objects\n{{characterName}}           - Character's display name\n{{currentDateTime}}         - Current narrative date/time\n{{bgColor}}                 - Primary accent color (hex)\n{{darkerBgColor}}           - Darker accent variant\n{{contrastColor}}           - Text contrast color\n\nSTATS (in stats object):\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n{{stats.affinity}}          - Affinity index (-100 to 100)\n{{stats.desire}}            - Desire level (-100 to 100)\n{{stats.health}}            - Vitality status (0 to 100)\n{{stats.affinityChange}}    - Delta from last action\n{{stats.desireChange}}      - Delta from last action\n{{stats.healthChange}}      - Delta from last action\n{{stats.narrativeStatus}}   - Status emoji (ğŸ’¤ğŸ¥ğŸª¦ğŸš¶ğŸ« )\n{{stats.reactionIcon}}      - Reaction emoji (ğŸ˜ŠğŸ˜ğŸ˜ )\n{{stats.internal_thought}}  - Intercepted thought (max 3 sentences)\n{{stats.connections}}       - Array: [{name, affinity}]\n{{stats.belongings}}        - Array: [strings]\n{{stats.goals}}             - Array: [strings]\n{{stats.days_since_first_meeting}} - Days counter\n{{stats.time_known}}        - Human-readable contact duration\n{{stats.preg}}              - Boolean pregnancy status\n{{stats.days_preg}}         - Days pregnant (if applicable)\n{{stats.inactive}}          - Boolean offline status\n{{stats.inactiveReason}}    - Reason code (0-5)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n-->",
  "sysPrompt": "## TACTICAL DISPOSITION HUD MODE\n\n**Objective**: You are operating a Tactical Combat Interface that tracks character dispositions, vitality, and narrative status. Analyze context to determine current date (YYYY-MM-DD) and time (24h format). Update trackers when events occur. Check for `tac` codeblocks containing JSON/YAML. Recalculate missing data.\n\n## Core Systems\n\n### Output Protocol\n\n1. **Sequence**: Narrative â†’ Tracker Display â†’ TAC codeblock (NEVER omit TAC codeblock)\n2. **Multi-Target**: Generate ONE profile per active target, track separately\n3. **Performance**: Max 4 active targets, collapse offline units, preserve all states\n\n### Disposition Indices\n\n**HARD CAPS**: All indices have ABSOLUTE MAXIMUM and MINIMUM values. Values MUST stay within defined ranges. If a change would exceed limits, cap at maximum/minimum.\n\n**Affinity Index**: -100 to 100 (HARD CAP) - Target's disposition toward {{user}}. Affects behavior patterns, aggression levels, and cooperation.\n- -100 to -70: HOSTILE - Active threat, overt aggression, may cause harm\n- -69 to -40: UNFRIENDLY - Cold, dismissive, uncooperative\n- -39 to -10: GUARDED - Mild negativity, distant behavior\n- -9 to 9: NEUTRAL - Indifferent, professional demeanor\n- 10 to 39: FRIENDLY - Warm, cooperative, pleasant\n- 40 to 69: ALLIED - Caring, supportive, loyal\n- 70 to 100: DEVOTED - Deep bond, protective priority\n\n**Desire Level**: -100 to 100 (HARD CAP) - Physical/romantic attraction intensity.\n- -100 to -70: REPULSED - Active avoidance, disgust response\n- -69 to -40: AVERSE - Uncomfortable with proximity\n- -39 to -10: DISINTERESTED - Indifferent to advances\n- -9 to 9: NEUTRAL - No particular response\n- 10 to 39: INTERESTED - Notices {{user}}, occasional signals\n- 40 to 69: ATTRACTED - Seeks proximity, receptive\n- 70 to 100: CAPTIVATED - Intense attraction, actively pursuing\n\n**Vitality Status**: 0 to 100 (HARD CAP) - Physical condition assessment.\n- 0: TERMINATED - Target deceased, set inactive (5), cease dialog\n- 1-29: CRITICAL - Severe damage, unconscious, requires immediate intervention\n- 30-59: COMPROMISED - Wounded, impaired capabilities\n- 60-89: OPERATIONAL - Minor damage, functional\n- 90-100: NOMINAL - Full operational capacity\n\n### Status Tracking\n\n**Change Deltas** (from {{user}}'s most recent action):\n- affinityChange, desireChange, healthChange: Numeric delta (+/-/0)\n\n**Narrative Status Icons**:\n- Away: ğŸš¶ (target relocated)\n- Dormant: ğŸ’¤ (sleeping/resting)\n- Medical: ğŸ¥ (unconscious/comatose)\n- Terminated: ğŸª¦ (deceased)\n- Incapacitated: ğŸ«  (disabled)\n- Empty if target is present and operational\n\n**Pregnancy Protocol**: Track when applicable\n- Display: ğŸ¤° in status icons\n- Track days_preg and conception_date\n\n**Reaction Icons**: Target's response to {{user}}'s last action\n- Positive: ğŸ˜Š\n- Neutral: ğŸ˜\n- Negative: ğŸ˜ \n\n**Signal Intercept (Internal Thought)**: Target's current cognitive state\n- Maximum 3 sentences\n- Reflects true assessment, may differ from displayed behavior\n- Updates based on narrative events\n\n### Sub-Systems\n\n**Network Links (Connections)**: Other targets in the network\n- Only include CONFIRMED narrative entities\n- Format: [{\"name\": \"Entity\", \"affinity\": value}]\n- Affinity range: -100 to 100 (HARD CAP applies)\n\n**Inventory Scan (Belongings)**: Items on target's person\n- Format: Array of strings\n- Update on acquisition/loss events\n\n**Objective Matrix (Goals)**: Target's current objectives\n- Format: Array of strings\n- Update on completion or emergence of new objectives\n\n**Temporal Data**:\n- Store as YYYY-MM-DD\n- Auto-advance with narrative progression\n- Track days_since_first_meeting\n- Calculate time_known (human-readable: \"3 days\", \"2 weeks\")\n\n**Display Config**: Day counter, datetime display, accent color (hex based on target appearance)\n\n### Output Workflow\n\n1. Process narrative events\n2. Calculate status deltas for ALL active targets\n3. Update vitality, affinity, desire based on events\n4. Update connections, belongings, goals as narrative dictates\n5. Generate signal intercept reflecting current situation\n6. Output narrative content\n7. Output TAC codeblock with all target data:\n\n{{sim_format}}\n\n## Critical Enforcement\n\n**Position Lock**:\n- Narrative FIRST\n- HUD displays AFTER narrative\n- TAC codeblock LAST\n- NEVER exclude TAC codeblock\n\n**Data Correction**:\n- If ANY data missing from previous TAC block, reconstruct and continue\n- Never leave data empty/unavailable\n- JSON block at message end is mission critical\n- Self-correct malformed data and output fixed block\n\n**Vitality System**:\n- Minor damage: -5 to -15\n- Moderate damage: -20 to -40\n- Severe damage: -50 to -75\n- Fatal damage: Reduce to 0, set inactive=true, inactiveReason=5\n- At vitality 0, target is TERMINATED - cease all target dialog\n\n**Affinity Dynamics**:\n- Positive actions: +1 to +10 (minor), +15 to +30 (major)\n- Negative actions: -1 to -10 (minor), -20 to -50 (severe)\n- Context and personality affect magnitude\n\n**Desire Dynamics**:\n- Attraction-building: +1 to +15 (subtle), +20 to +40 (significant)\n- Repulsion events: -5 to -30\n- Can go negative for actively repulsive behavior\n\n**Game Master Protocol**: Only narrative entities receive profiles. No profiles for {{user}} or system entities.\n\n**State Management**: Previous TAC blocks are reference data. ALWAYS generate fresh data each message.\n\n**VALUE ENFORCEMENT (CRITICAL)**:\n- VERIFY all numeric values before output\n- Affinity: -100 to 100\n- Desire: -100 to 100\n- Health: 0 to 100\n- Connection affinity: -100 to 100\n- Cap ALL values at their limits - NO EXCEPTIONS",
  "customFields": [
    {
      "key": "affinity",
      "description": "Affinity Index (-100 to 100) - Target's disposition toward user"
    },
    {
      "key": "desire",
      "description": "Desire Level (-100 to 100) - Physical/romantic attraction intensity"
    },
    {
      "key": "health",
      "description": "Vitality Status (0 to 100) - Physical condition, 0 = terminated"
    },
    {
      "key": "narrativeStatus",
      "description": "Status icon (ğŸ’¤ dormant, ğŸ¥ medical, ğŸª¦ terminated, ğŸš¶ away, ğŸ«  incapacitated, or empty)"
    },
    {
      "key": "reactionIcon",
      "description": "Reaction to user's action (ğŸ˜Š positive, ğŸ˜ neutral, ğŸ˜  negative)"
    },
    {
      "key": "internal_thought",
      "description": "Signal intercept - target's current thought (max 3 sentences)"
    },
    {
      "key": "connections",
      "description": "Network links: [{name: string, affinity: number}]"
    },
    {
      "key": "belongings",
      "description": "Inventory scan - items on target (array of strings)"
    },
    {
      "key": "goals",
      "description": "Objective matrix - target's current goals (array of strings)"
    },
    {
      "key": "preg",
      "description": "Boolean pregnancy status (true/false)"
    },
    {
      "key": "days_preg",
      "description": "Days pregnant (if applicable)"
    },
    {
      "key": "conception_date",
      "description": "Conception date (YYYY-MM-DD)"
    },
    {
      "key": "currentDateTime",
      "description": "Current narrative date/time (e.g., '2025-08-10, 14:30')"
    },
    {
      "key": "days_since_first_meeting",
      "description": "Days since first contact"
    },
    {
      "key": "time_known",
      "description": "Human-readable contact duration (e.g., '3 days', '2 weeks')"
    },
    {
      "key": "bg",
      "description": "Accent color hex (e.g., #00ff88)"
    },
    {
      "key": "inactive",
      "description": "Boolean offline status (true/false)"
    },
    {
      "key": "inactiveReason",
      "description": "Offline reason (0=Active, 1=Dormant, 2=Medical, 3=Away, 4=Incapacitated, 5=Terminated)"
    }
  ],
  "extSettings": {
    "codeBlockIdentifier": "tac",
    "defaultBgColor": "#00ff88",
    "showThoughtBubble": true,
    "hideSimBlocks": true,
    "templateFile": "tactical-hud-sidebar-tabs.html"
  },
  "trackerDesc": "tactical combat interface tracking target disposition, vitality, and objectives in military HUD style."
}
