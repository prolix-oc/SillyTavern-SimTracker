<!-- TEMPLATE NAME: Dating Sim Tracker -->
<!-- AUTHOR: Prolix OCs -->

<!-- CARD_TEMPLATE_START -->
<style>
/* Base styles for the card */
.tracker-card {
  min-width: 320px;
  border-radius: 16px;
  padding: 0;
  box-sizing: border-box;
  position: relative;
  color: #fff;
  font-size: 14px;
  font-weight: 500;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
  backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;
}

/* Apply opacity if inactive */
.tracker-card.inactive {
  opacity: 0.6;
}

/* Gradient overlay at the top */
.gradient-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent) !important;
}

/* Header section */
.tracker-card-header {
  padding: 16px 20px 0 20px;
  font-size: 12px;
  font-weight: 500;
  display: flex;
  flex-direction: column;
}

/* Header row for date and counters */
.header-row-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  margin-bottom: 8px;
}

/* Header badge style */
.header-badge {
  padding: 4px 10px;
  border-radius: 8px;
  font-weight: 500;
  letter-spacing: 0.25px;
  background: rgba(0, 0, 0, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
}

/* Header row for character name and icons */
.header-row-middle {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  width: 100%;
  margin-bottom: 4px;
}

.character-name {
  font-size: 26px;
  font-weight: 600;
  letter-spacing: -0.25px;
  text-align: left;
}

.icon-container {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 20px;
  flex-shrink: 0;
}

/* Header row for character status */
.header-row-bottom {
  display: flex;
  justify-content: flex-start;
  width: 100%;
  margin-bottom: 12px;
}

.character-status {
  display: flex;
  align-items: center;
  font-size: 12px !important;
  font-weight: 500 !important;
  color: rgba(255, 255, 255, 0.7) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  letter-spacing: 0.25px !important;
}

.status-divider {
  margin: 0 8px !important;
  opacity: 0.5 !important;
}

/* Stats container */
.stats-container {
  position: absolute;
  top: 115px;
  bottom: 110px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 12px;
  gap: 8px;
  flex-wrap: nowrap;
}

/* Individual stat item */
.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  min-width: 60px;
  max-width: 120px;
  position: relative;
}

.stat-title {
  font-size: 8px;
  font-weight: 500;
  opacity: 0.8;
  margin-bottom: 3px;
  color: rgba(255, 255, 255, 0.9);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  text-align: center;
  line-height: 1.2;
}

.stat-container {
  padding: 6px 3px;
  border-radius: 10px;
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  min-height: 70px;
  justify-content: center;
  box-sizing: border-box;
  transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
  border: 1px solid rgba(255, 255, 255, 0.05) !important;
  background: rgba(255, 255, 255, 0.05) !important;
  backdrop-filter: blur(4px) !important;
}

.stat-container:hover {
  background: rgba(255, 255, 255, 0.12) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

.stat-icon {
  font-size: 20px;
  line-height: 1;
  margin-bottom: 3px;
}

.stat-value {
  font-size: 16px;
  font-weight: 600;
  line-height: 1;
}

/* Change indicator */
.change-indicator {
  position: absolute;
  top: -8px;
  right: -8px;
  color: white;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  min-width: 24px;
  text-align: center;
  line-height: 1.2;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  animation: pulse 0.5s ease-in-out;
}

.change-indicator.positive {
  background: rgba(46, 204, 113, 0.9) !important;
}

.change-indicator.negative {
  background: rgba(231, 76, 60, 0.9) !important;
}

.change-indicator.negative-alt {
  background: rgba(46, 204, 113, 0.9) !important;
}

@keyframes pulse {
  0% { transform: scale(0.8); opacity: 0.7; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

/* Thought label divider */
.thought-label-divider {
  position: absolute;
  bottom: 52px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
  opacity: 0.6;
}

/* Thought bubble */
.thought-bubble {
  position: absolute;
  left: 16px;
  right: 16px;
  bottom: 16px;
  min-height: 60px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: rgba(0, 0, 0, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;
}

.thought-label {
  position: absolute;
  top: -24px;
  left: 0;
  font-size: 11px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.7);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  letter-spacing: 0.25px;
}

/* --- Media Queries --- */

/* Mobile Styles */
@media (max-width: 768px) {
  .tracker-card {
    width: 100%;
    max-width: 100%;
    min-height: 400px;
  }
  
  .stat-icon { font-size: 20px !important; margin-bottom: 3px !important; }
  .stat-value { font-size: 16px !important; }
  .stat-container { min-height: 70px !important; padding: 6px 3px !important; }
  .stat-title { font-size: 9px !important; }
  
  /* Adjust stats container position for mobile */
  .stats-container {
    top: 100px !important;
    bottom: 110px !important;
  }
}

/* Desktop Styles (2-column layout) */
@media (min-width: 769px) {
  .tracker-card {
    flex: 1 1 calc(50% - 10px);
    max-width: calc(50% - 10px);
    min-width: 300px; /* Ensure cards don't get too small */
    height: 400px;
  }
  
  .stat-icon { font-size: 28px !important; margin-bottom: 6px !important; }
  .stat-value { font-size: 20px !important; }
  .stat-container { min-height: 90px !important; padding: 10px 6px !important; }
  .stat-title { font-size: 10px !important; }
  
  /* Adjust stats container position for desktop */
  .stats-container {
    top: 110px !important;
    bottom: 110px !important;
  }
}

/* Large Screen Styles */
@media (min-width: 1400px) {
  .tracker-card {
    flex: 1 1 600px;
    max-width: 600px;
    height: 400px;
  }
  
  .stat-icon { font-size: 32px !important; margin-bottom: 8px !important; }
  .stat-value { font-size: 24px !important; }
  .stat-container { min-height: 100px !important; padding: 12px 8px !important; }
  .stat-title { font-size: 11px !important; }
  
  /* Adjust stats container position for large screens */
  .stats-container {
    top: 110px !important;
    bottom: 110px !important;
  }
}
</style>

<div class="tracker-card {{#unless isActive}}inactive{{/unless}}" style="background: linear-gradient(145deg, {{bgColor}} 0%, {{darkerBgColor}} 50%, {{darkerBgColor}} 100%);">
  <div class="gradient-overlay"></div>
  
  <!-- Combined Header Section -->
  <div class="tracker-card-header">
    <!-- Date and Counters Row -->
    <div class="header-row-top">
      <div class="header-badge">{{currentDate}}</div>
      <div style="display: flex; gap: 8px;">
        <div class="header-badge">Day {{stats.days_since_first_meeting}}</div>
        {{#if stats.preg}}<div class="header-badge">ü§∞{{stats.days_preg}}d</div>{{/if}}
      </div>
    </div>
    
    <!-- Character Name and Icons Row -->
    <div class="header-row-middle">
      <div class="character-name">{{characterName}}</div>
      <div class="icon-container">
        {{#if healthIcon}}<span>{{healthIcon}}</span>{{/if}}
        {{#if stats.inactive}}
          {{#if (eq stats.inactiveReason 1)}}<span>üò¥</span>{{/if}}
          {{#if (eq stats.inactiveReason 2)}}<span>üè•</span>{{/if}}
          {{#if (eq stats.inactiveReason 3)}}<span>üò°</span>{{/if}}
          {{#if (eq stats.inactiveReason 4)}}<span>ü´†</span>{{/if}}
          {{#if (eq stats.inactiveReason 5)}}<span>ü™¶</span>{{/if}}
        {{/if}}
        <span>{{reactionEmoji}}</span>
      </div>
    </div>
    
    <!-- Character Status Row -->
    <div class="header-row-bottom">
      <div class="character-status">
        {{#if stats.relationshipStatus}}<span>{{stats.relationshipStatus}}</span>{{/if}}
        {{#if stats.desireStatus}}<span class="status-divider">|</span><span>{{stats.desireStatus}}</span>{{/if}}
      </div>
    </div>
  </div>
  
  <!-- Stats Section -->
  <div class="stats-container">
    <div class="stat-item">
      <div class="stat-title">AFFECTION</div>
      <div class="stat-container">
        <div class="stat-icon">‚ù§Ô∏è</div>
        <div class="stat-value">{{stats.ap}}</div>
        {{#if stats.apChange}}{{#unless (eq stats.apChange 0)}}
        <div class="change-indicator positive">
          {{#if (gt stats.apChange 0)}}+{{/if}}{{stats.apChange}}
        </div>
        {{/unless}}{{/if}}
      </div>
    </div>
    
    <div class="stat-item">
      <div class="stat-title">DESIRE</div>
      <div class="stat-container">
        <div class="stat-icon">üî•</div>
        <div class="stat-value">{{stats.dp}}</div>
        {{#if stats.dpChange}}{{#unless (eq stats.dpChange 0)}}
        <div class="change-indicator negative">
          {{#if (gt stats.dpChange 0)}}+{{/if}}{{stats.dpChange}}
        </div>
        {{/unless}}{{/if}}
      </div>
    </div>
    
    <div class="stat-item">
      <div class="stat-title">TRUST</div>
      <div class="stat-container">
        <div class="stat-icon">ü§ù</div>
        <div class="stat-value">{{stats.tp}}</div>
        {{#if stats.tpChange}}{{#unless (eq stats.tpChange 0)}}
        <div class="change-indicator positive">
          {{#if (gt stats.tpChange 0)}}+{{/if}}{{stats.tpChange}}
        </div>
        {{/unless}}{{/if}}
      </div>
    </div>
    
    <div class="stat-item">
      <div class="stat-title">CONTEMPT</div>
      <div class="stat-container">
        <div class="stat-icon">üíî</div>
        <div class="stat-value">{{stats.cp}}</div>
        {{#if stats.cpChange}}{{#unless (eq stats.cpChange 0)}}
        <div class="change-indicator negative-alt">
          {{#if (gt stats.cpChange 0)}}+{{/if}}{{stats.cpChange}}
        </div>
        {{/unless}}{{/if}}
      </div>
    </div>
  </div>
  
  <!-- Thought Bubble Section -->
  <div class="thought-label-divider"></div>
  <div class="thought-bubble">
    <div class="thought-label">{{characterName}} thinks:</div>
    <div style="font-size: 22px; flex-shrink: 0;">üí≠</div>
    <div style="flex: 1; font-size: 13px; font-weight: 400; line-height: 1.4; overflow: hidden;">{{stats.internal_thought}}</div>
  </div>
</div>
<!-- CARD_TEMPLATE_END -->

<!-- 
TEMPLATE VARIABLES:
- {{characterName}}: Character's name
- {{currentDate}}: Current date in YYYY-MM-DD format
- {{bgColor}}: Primary background color
- {{darkerBgColor}}: Darker variant of background color
- {{contrastColor}}: Contrast color for text against background
- {{stats.ap}}: Affection points
- {{stats.dp}}: Desire points
- {{stats.tp}}: Trust points
- {{stats.cp}}: Contempt points
- {{stats.apChange}}: Change in affection points (positive/negative/zero)
- {{stats.dpChange}}: Change in desire points (positive/negative/zero)
- {{stats.tpChange}}: Change in trust points (positive/negative/zero)
- {{stats.cpChange}}: Change in contempt points (positive/negative/zero)
- {{stats.days_since_first_meeting}}: Days since first meeting
- {{stats.preg}}: Boolean for pregnancy status
- {{stats.days_preg}}: Days pregnant (if applicable)
- {{stats.internal_thought}}: Character's internal thoughts
- {{stats.relationshipStatus}}: Relationship status text
- {{stats.desireStatus}}: Desire status text
- {{stats.inactive}}: Boolean for inactive status
- {{stats.inactiveReason}}: Number indicating reason for inactivity (0-5)
- {{healthIcon}}: Health status icon (ü§ï or üíÄ)
- {{reactionEmoji}}: Reaction emoji (üëç, üëé, or üòê)
- {{showThoughtBubble}}: Boolean to show/hide thought bubble (always shown in this template)
- {{isActive}}: Boolean for card active state (affects opacity)
-->