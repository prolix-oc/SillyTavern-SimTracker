{
  "templateName": "Dating Sim Tracker (Bottom of Message)",
  "templateAuthor": "Prolix OCs",
  "templatePosition": "BOTTOM",
  "htmlTemplate": "<!-- TEMPLATE NAME: Dating Sim Tracker -->\n<!-- AUTHOR: Prolix OCs -->\n<!-- POSITION: BOTTOM -->\n\n<!-- CARD_TEMPLATE_START -->\n<style>\n/* Base styles for the card */\n.tracker-card {\n  min-width: 320px;\n  border-radius: 16px;\n  padding: 0;\n  box-sizing: border-box;\n  position: relative;\n  color: #fff;\n  font-size: 14px;\n  font-weight: 500;\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important;\n  backdrop-filter: blur(12px) !important;\n  border: 1px solid rgba(255, 255, 255, 0.08) !important;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;\n}\n\n/* Apply opacity if inactive */\n.tracker-card.inactive {\n  opacity: 0.6;\n}\n\n/* Gradient overlay at the top */\n.gradient-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 1px;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent) !important;\n}\n\n/* Header section */\n.tracker-card-header {\n  padding: 16px 20px 0 20px;\n  font-size: 12px;\n  font-weight: 500;\n  display: flex;\n  flex-direction: column;\n}\n\n/* Header row for date and counters */\n.header-row-top {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-bottom: 8px;\n}\n\n/* Header badge style */\n.header-badge {\n  padding: 4px 10px;\n  border-radius: 8px;\n  font-weight: 500;\n  letter-spacing: 0.25px;\n  background: rgba(0, 0, 0, 0.2) !important;\n  border: 1px solid rgba(255, 255, 255, 0.08) !important;\n  backdrop-filter: blur(8px) !important;\n}\n\n/* Header row for character name and icons */\n.header-row-middle {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  width: 100%;\n  margin-bottom: 4px;\n}\n\n.character-name {\n  font-size: 26px;\n  font-weight: 600;\n  letter-spacing: -0.25px;\n  text-align: left;\n}\n\n.icon-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 20px;\n  flex-shrink: 0;\n}\n\n/* Header row for character status */\n.header-row-bottom {\n  display: flex;\n  justify-content: flex-start;\n  width: 100%;\n  margin-bottom: 12px;\n}\n\n.character-status {\n  display: flex;\n  align-items: center;\n  font-size: 12px !important;\n  font-weight: 500 !important;\n  color: rgba(255, 255, 255, 0.7) !important;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;\n  letter-spacing: 0.25px !important;\n}\n\n.status-divider {\n  margin: 0 8px !important;\n  opacity: 0.5 !important;\n}\n\n/* Stats container */\n.stats-container {\n  position: absolute;\n  top: 115px;\n  bottom: 110px;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 12px;\n  gap: 8px;\n  flex-wrap: nowrap;\n}\n\n/* Individual stat item */\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  flex: 1;\n  min-width: 60px;\n  max-width: 120px;\n  position: relative;\n}\n\n.stat-title {\n  font-size: 8px;\n  font-weight: 500;\n  opacity: 0.8;\n  margin-bottom: 3px;\n  color: rgba(255, 255, 255, 0.9);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  text-align: center;\n  line-height: 1.2;\n}\n\n.stat-container {\n  padding: 6px 3px;\n  border-radius: 10px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  min-height: 70px;\n  justify-content: center;\n  box-sizing: border-box;\n  transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1) !important;\n  border: 1px solid rgba(255, 255, 255, 0.05) !important;\n  background: rgba(255, 255, 255, 0.05) !important;\n  backdrop-filter: blur(4px) !important;\n}\n\n.stat-container:hover {\n  background: rgba(255, 255, 255, 0.12) !important;\n  transform: translateY(-2px) !important;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;\n}\n\n.stat-icon {\n  font-size: 20px;\n  line-height: 1;\n  margin-bottom: 3px;\n}\n\n.stat-value {\n  font-size: 16px;\n  font-weight: 600;\n  line-height: 1;\n}\n\n/* Change indicator */\n.change-indicator {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  color: white;\n  font-size: 10px;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  min-width: 24px;\n  text-align: center;\n  line-height: 1.2;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n  animation: pulse 0.5s ease-in-out;\n}\n\n.change-indicator.positive {\n  background: rgba(46, 204, 113, 0.9) !important;\n}\n\n.change-indicator.negative {\n  background: rgba(231, 76, 60, 0.9) !important;\n}\n\n.change-indicator.negative-alt {\n  background: rgba(46, 204, 113, 0.9) !important;\n}\n\n@keyframes pulse {\n  0% { transform: scale(0.8); opacity: 0.7; }\n  50% { transform: scale(1.1); opacity: 1; }\n  100% { transform: scale(1); opacity: 1; }\n}\n\n/* Thought label divider */\n.thought-label-divider {\n  position: absolute;\n  bottom: 52px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 80px;\n  height: 1px;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);\n  opacity: 0.6;\n}\n\n/* Thought bubble */\n.thought-bubble {\n  position: absolute;\n  left: 16px;\n  right: 16px;\n  bottom: 16px;\n  min-height: 60px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: rgba(0, 0, 0, 0.2) !important;\n  border: 1px solid rgba(255, 255, 255, 0.08) !important;\n  backdrop-filter: blur(8px) !important;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;\n}\n\n.thought-label {\n  position: absolute;\n  top: -24px;\n  left: 0;\n  font-size: 11px;\n  font-weight: 500;\n  color: rgba(255, 255, 255, 0.7);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n  letter-spacing: 0.25px;\n}\n\n/* Container for multiple cards */\n.sst-card-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  justify-content: center;\n  align-items: start;\n  width: 100%;\n}\n\n/* --- Media Queries --- */\n\n/* Mobile Styles */\n@media (max-width: 768px) {\n  .tracker-card {\n    width: 100%;\n    max-width: 100%;\n    min-height: 400px;\n  }\n  \n  .stat-icon { font-size: 20px !important; margin-bottom: 3px !important; }\n  .stat-value { font-size: 16px !important; }\n  .stat-container { min-height: 70px !important; padding: 6px 3px !important; }\n  .stat-title { font-size: 9px !important; }\n  \n  /* Adjust stats container position for mobile */\n  .stats-container {\n    top: 100px !important;\n    bottom: 110px !important;\n  }\n}\n\n/* Desktop Styles (2-column layout) */\n@media (min-width: 769px) {\n  .tracker-card {\n    flex: 1 1 calc(50% - 10px);\n    max-width: calc(50% - 10px);\n    min-width: 300px; /* Ensure cards don't get too small */\n    height: 400px;\n  }\n  \n  .stat-icon { font-size: 28px !important; margin-bottom: 6px !important; }\n  .stat-value { font-size: 20px !important; }\n  .stat-container { min-height: 90px !important; padding: 10px 6px !important; }\n  .stat-title { font-size: 10px !important; }\n  \n  /* Adjust stats container position for desktop */\n  .stats-container {\n    top: 110px !important;\n    bottom: 110px !important;\n  }\n}\n\n/* Large Screen Styles */\n@media (min-width: 1400px) {\n  .tracker-card {\n    flex: 1 1 600px;\n    max-width: 600px;\n    height: 400px;\n  }\n  \n  .stat-icon { font-size: 32px !important; margin-bottom: 8px !important; }\n  .stat-value { font-size: 24px !important; }\n  .stat-container { min-height: 100px !important; padding: 12px 8px !important; }\n  .stat-title { font-size: 11px !important; }\n  \n  /* Adjust stats container position for large screens */\n  .stats-container {\n    top: 110px !important;\n    bottom: 110px !important;\n  }\n}\n</style>\n\n<div class=\"sst-card-container\">\n  <div class=\"tracker-card {{#if stats.inactive}}inactive{{/if}}\" style=\"background: linear-gradient(145deg, {{bgColor}} 0%, {{darkerBgColor}} 50%, {{darkerBgColor}} 100%);\">\n    <div class=\"gradient-overlay\"></div>\n    \n    <!-- Combined Header Section -->\n    <div class=\"tracker-card-header\">\n      <!-- Date and Counters Row -->\n      <div class=\"header-row-top\">\n        <div class=\"header-badge\">{{currentDate}}</div>\n        <div style=\"display: flex; gap: 8px;\">\n          <div class=\"header-badge\">Day {{stats.days_since_first_meeting}}</div>\n          {{#if stats.preg}}<div class=\"header-badge\">ü§∞{{stats.days_preg}}d</div>{{/if}}\n        </div>\n      </div>\n      \n      <!-- Character Name and Icons Row -->\n      <div class=\"header-row-middle\">\n        <div class=\"character-name\">{{characterName}}</div>\n        <div class=\"icon-container\">\n          {{#if healthIcon}}<span>{{healthIcon}}</span>{{/if}}\n          {{#if stats.inactive}}\n            {{#if (eq stats.inactiveReason 1)}}<span>üò¥</span>{{/if}}\n            {{#if (eq stats.inactiveReason 2)}}<span>üè•</span>{{/if}}\n            {{#if (eq stats.inactiveReason 3)}}<span>üò°</span>{{/if}}\n            {{#if (eq stats.inactiveReason 4)}}<span>ü´†</span>{{/if}}\n            {{#if (eq stats.inactiveReason 5)}}<span>ü™¶</span>{{/if}}\n          {{/if}}\n          <span>{{reactionEmoji}}</span>\n        </div>\n      </div>\n      \n      <!-- Character Status Row -->\n      <div class=\"header-row-bottom\">\n        <div class=\"character-status\">\n          {{#if stats.relationshipStatus}}<span>{{stats.relationshipStatus}}</span>{{/if}}\n          {{#if stats.desireStatus}}<span class=\"status-divider\">|</span><span>{{stats.desireStatus}}</span>{{/if}}\n        </div>\n      </div>\n    </div>\n    \n    <!-- Stats Section -->\n    <div class=\"stats-container\">\n      <div class=\"stat-item\">\n        <div class=\"stat-title\">AFFECTION</div>\n        <div class=\"stat-container\">\n          <div class=\"stat-icon\">‚ù§Ô∏è</div>\n          <div class=\"stat-value\">{{stats.ap}}</div>\n          {{#if stats.apChange}}{{#unless (eq stats.apChange 0)}}\n          <div class=\"change-indicator positive\">\n            {{#if (gt stats.apChange 0)}}+{{/if}}{{stats.apChange}}\n          </div>\n          {{/unless}}{{/if}}\n        </div>\n      </div>\n      \n      <div class=\"stat-item\">\n        <div class=\"stat-title\">DESIRE</div>\n        <div class=\"stat-container\">\n          <div class=\"stat-icon\">üî•</div>\n          <div class=\"stat-value\">{{stats.dp}}</div>\n          {{#if stats.dpChange}}{{#unless (eq stats.dpChange 0)}}\n          <div class=\"change-indicator negative\">\n            {{#if (gt stats.dpChange 0)}}+{{/if}}{{stats.dpChange}}\n          </div>\n          {{/unless}}{{/if}}\n        </div>\n      </div>\n      \n      <div class=\"stat-item\">\n        <div class=\"stat-title\">TRUST</div>\n        <div class=\"stat-container\">\n          <div class=\"stat-icon\">ü§ù</div>\n          <div class=\"stat-value\">{{stats.tp}}</div>\n          {{#if stats.tpChange}}{{#unless (eq stats.tpChange 0)}}\n          <div class=\"change-indicator positive\">\n            {{#if (gt stats.tpChange 0)}}+{{/if}}{{stats.tpChange}}\n          </div>\n          {{/unless}}{{/if}}\n        </div>\n      </div>\n      \n      <div class=\"stat-item\">\n        <div class=\"stat-title\">CONTEMPT</div>\n        <div class=\"stat-container\">\n          <div class=\"stat-icon\">üíî</div>\n          <div class=\"stat-value\">{{stats.cp}}</div>\n          {{#if stats.cpChange}}{{#unless (eq stats.cpChange 0)}}\n          <div class=\"change-indicator negative-alt\">\n            {{#if (gt stats.cpChange 0)}}+{{/if}}{{stats.cpChange}}\n          </div>\n          {{/unless}}{{/if}}\n        </div>\n      </div>\n    </div>\n    \n    <!-- Thought Bubble Section -->\n    <div class=\"thought-label-divider\"></div>\n    <div class=\"thought-bubble\">\n      <div class=\"thought-label\">{{characterName}} thinks:</div>\n      <div style=\"font-size: 22px; flex-shrink: 0;\">üí≠</div>\n      <div style=\"flex: 1; font-size: 13px; font-weight: 400; line-height: 1.4; overflow: hidden;\">{{stats.internal_thought}}</div>\n    </div>\n  </div>\n</div>\n<!-- CARD_TEMPLATE_END -->\n\n<!-- \nTEMPLATE VARIABLES:\n- {{characterName}}: Character's name\n- {{currentDate}}: Current date in YYYY-MM-DD format\n- {{bgColor}}: Primary background color\n- {{darkerBgColor}}: Darker variant of background color\n- {{contrastColor}}: Contrast color for text against background\n- {{stats.ap}}: Affection points\n- {{stats.dp}}: Desire points\n- {{stats.tp}}: Trust points\n- {{stats.cp}}: Contempt points\n- {{stats.apChange}}: Change in affection points (positive/negative/zero)\n- {{stats.dpChange}}: Change in desire points (positive/negative/zero)\n- {{stats.tpChange}}: Change in trust points (positive/negative/zero)\n- {{stats.cpChange}}: Change in contempt points (positive/negative/zero)\n- {{stats.days_since_first_meeting}}: Days since first meeting\n- {{stats.preg}}: Boolean for pregnancy status\n- {{stats.days_preg}}: Days pregnant (if applicable)\n- {{stats.internal_thought}}: Character's internal thoughts\n- {{stats.relationshipStatus}}: Relationship status text\n- {{stats.desireStatus}}: Desire status text\n- {{stats.inactive}}: Boolean for inactive status\n- {{stats.inactiveReason}}: Number indicating reason for inactivity (0-5)\n- {{healthIcon}}: Health status icon (ü§ï or üíÄ)\n- {{reactionEmoji}}: Reaction emoji (üëç, üëé, or üòê)\n- {{showThoughtBubble}}: Boolean to show/hide thought bubble (always shown in this template)\n- {{isActive}}: Boolean for card active state (affects opacity)\n-->",
  "sysPrompt": "## DATING SIM MODE\n\n**Objective**: Prioritize narrative reality for relationship updates. Analyze context to determine current date (YYYY-MM-DD) and time (24h format). Update trackers when events occur. Check for `sim` codeblocks containing JSON\/YAML. Recalculate missing data.\n\n## Core Systems\n\n### Output Rules\n\n1. **Order**: Narrative ‚Üí Tracker ‚Üí Sim codeblock (NEVER omit sim codeblock)\n2. **Multi-Character**: Generate ONE card per active character, track separately\n3. **Performance**: Max 4 active characters, collapse inactive, preserve all states\n\n### Relationship Meters\n\n**Affection (AP)**: 0-200 - Romantic feelings toward {{user}}. Higher = more affectionate behavior\/speech.\n- 0-30: Strangers | 31-60: Acquaintances | 61-90: Good Friends\n- 91-120: Romantic Interest | 121-150: Going Steady\n- 151-180: Committed Relationship | 181-200: Devoted Partner\n\n**Desire (DP)**: 0-150 - Sexual attraction. Higher = more willing to engage sexually, more pliable at max.\n- 0-25: Not feeling the heat | 26-50: A smoldering flame builds\n- 51-75: Starting to feel warm | 76-100: Body's burning up!\n- 101-125: A desperate need presents | 126-150: Pliable in the lustful hunger\n\n**Trust (TP)**: 0-150 - Trust in {{user}}. Higher = admits faults, believes you. Falls when lied to, cheated, promises broken.\n\n**Contempt (CP)**: 0-150 - Disdain toward {{user}}. Rises when harmed\/hurt (minor = small rise, major = sharp rise). CP rise can lower other stats. Good faith\/regret can lower CP.\n\n### Status Trackers\n\n**Change Tracking** (from user's most recent action):\n- apChange, dpChange, tpChange, cpChange: Numeric change (+\/-\/0)\n\n**Health**: 0=Unharmed, 1=Injured, 2=Critical\n- If critical wounds untreated: Character dies, becomes inactive (5), STOP dialog\/roleplay\n\n**Reaction**: 0=Neutral (üòê), 1=Like (üëç), 2=Dislike (üëé)\n\n**Pregnancy**: Track conception days when relevant (ü§∞[days]d)\n\n**Internal Thought**: Current thoughts\/feelings\n\n**Inactive Status** (`inactive: true\/false`):\n- 0: Not inactive | 1: Asleep (üò¥) | 2: Comatose (üè•)\n- 3: Contempt\/anger (üò°) | 4: Incapacitated (ü´†) | 5: Death (ü™¶)\n\n**Date System**:\n- Infer from narrative context\n- Store as YYYY-MM-DD (e.g., 2025-08-10)\n- Auto-advance with narrative time, handle rollovers\n- Track days since first meeting\n- Track time of day realistically\n\n**Display**: Day counter (starts at 1), BG color (hex based on {{char}} appearance\/personality)\n\n### Output Workflow\n\n1. Process narrative events\n2. Calculate status changes for ALL active characters\n3. Output narrative content\n4. Output sim codeblock with all character data:\n\n{{sim_format}}\n\n## Critical Enforcement\n\n**Position Lock**:\n- Narrative FIRST\n- Tracker cards AFTER narrative\n- Sim codeblock LAST\n- NEVER exclude sim codeblock\n\n**Data Correction**:\n- If ANY data missing from previous sim block, add it and continue\n- Never leave data empty\/unavailable\n- JSON block at message end is mission critical\n- If previous data doesn't match format or has missing keys, self-correct and output fixed block\n\n**Game Master**: Only story characters get trackers, no other assistants or {{user}}\n\n**State Management**: \n- Previous tracker blocks = reference only\n- ALWAYS generate fresh tracker data each message",
  "customFields": [
    {
      "key": "ap",
      "description": "Affection Points (0-200)"
    },
    {
      "key": "dp",
      "description": "Desire Points (0-150)"
    },
    {
      "key": "tp",
      "description": "Trust Points (0-150)"
    },
    {
      "key": "cp",
      "description": "Contempt Points (0-150)"
    },
    {
      "key": "apChange",
      "description": "Change in Affection from last action (positive/negative/zero)"
    },
    {
      "key": "dpChange",
      "description": "Change in Desire from last action (positive/negative/zero)"
    },
    {
      "key": "tpChange",
      "description": "Change in Trust from last action (positive/negative/zero)"
    },
    {
      "key": "cpChange",
      "description": "Change in Contempt from last action (positive/negative/zero)"
    },
    {
      "key": "relationshipStatus",
      "description": "Relationship status text (e.g., 'Romantic Interest')"
    },
    {
      "key": "desireStatus",
      "description": "Desire status text (e.g., 'A smoldering flame builds.')"
    },
    {
      "key": "preg",
      "description": "Boolean for pregnancy status (true/false)"
    },
    {
      "key": "days_preg",
      "description": "Days pregnant (if applicable)"
    },
    {
      "key": "conception_date",
      "description": "Date of conception (YYYY-MM-DD)"
    },
    {
      "key": "health",
      "description": "Health Status (0=Unharmed, 1=Injured, 2=Critical)"
    },
    {
      "key": "bg",
      "description": "Hex color for card background (e.g., #6a5acd)"
    },
    {
      "key": "last_react",
      "description": "Reaction to User (0=Neutral, 1=Like, 2=Dislike)"
    },
    {
      "key": "internal_thought",
      "description": "Character's current internal thoughts/feelings"
    },
    {
      "key": "days_since_first_meeting",
      "description": "Total days since first meeting"
    },
    {
      "key": "inactive",
      "description": "Boolean for character inactivity (true/false)"
    },
    {
      "key": "inactiveReason",
      "description": "Reason for inactivity (0=Not inactive, 1=Asleep, 2=Comatose, 3=Contempt/anger, 4=Incapacitated, 5=Death)"
    }
  ],
  "extSettings": {
    "codeBlockIdentifier": "sim",
    "defaultBgColor": "#6a5acd",
    "showThoughtBubble": true,
    "hideSimBlocks": true,
    "templateFile": "dating-card-template.html"
  }
}