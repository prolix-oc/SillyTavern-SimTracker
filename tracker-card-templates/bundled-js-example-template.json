{
  "templateName": "Character Readiness Tracker (Bottom, Bundled JS Example)",
  "templateAuthor": "Prolix OCs",
  "templatePosition": "BOTTOM",
  "htmlTemplate": "<!-- TEMPLATE NAME: Test Function Tracker (Right Side with Tabs) -->\n<!-- POSITION: BOTTOM -->\n<!-- CARD_TEMPLATE_START -->\n<script type=\"text\/x-handlebars-template-logic\">\n\/\/ Example bundled JavaScript for SillySimTracker templates\n\/\/ This demonstrates how to add computed properties and transform data\n\nif (data.stats) {\n  \/\/ 1. Calculate readiness score based on health and fatigue\n  const health = data.stats.health || 0;\n  const fatigue = data.stats.fatigue || 0;\n  data.stats.readinessScore = Math.round((health - fatigue) \/ 2);\n  \n  \/\/ 2. Determine status tier with icon and color\n  if (data.stats.readinessScore > 40) {\n    data.stats.statusTier = \"Ready\";\n    data.stats.statusIcon = \"âœ“\";\n    data.stats.statusColor = \"#2ecc71\";\n  } else if (data.stats.readinessScore > 20) {\n    data.stats.statusTier = \"Capable\";\n    data.stats.statusIcon = \"â—\";\n    data.stats.statusColor = \"#f39c12\";\n  } else {\n    data.stats.statusTier = \"Needs Rest\";\n    data.stats.statusIcon = \"âš \";\n    data.stats.statusColor = \"#e74c3c\";\n  }\n  \n  \/\/ 3. Create health percentage for progress bar\n  data.stats.healthPercent = Math.min(100, Math.max(0, health));\n  \n  \/\/ 4. Truncate long thoughts for compact display\n  if (data.stats.internal_thought && data.stats.internal_thought.length > 100) {\n    data.stats.shortThought = data.stats.internal_thought.substring(0, 97) + '...';\n    data.stats.hasLongThought = true;\n  } else {\n    data.stats.shortThought = data.stats.internal_thought;\n    data.stats.hasLongThought = false;\n  }\n  \n  \/\/ 5. Add character initials for avatar\n  if (data.characterName) {\n    data.initials = data.characterName.split(' ').map(n => n[0].toUpperCase()).join('');\n  }\n}\n<\/script>\n\n<div class=\"sim-tracker-card\" style=\"\n  background: linear-gradient(135deg, {{bgColor}} 0%, {{darkerBgColor}} 100%);\n  border-radius: 12px;\n  padding: 20px;\n  margin: 15px 0;\n  color: white;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n\">\n  <!-- Header with Avatar and Name -->\n  <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\n    <div style=\"\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n      background: rgba(255,255,255,0.2);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 20px;\n      font-weight: bold;\n      margin-right: 15px;\n    \">\n      {{initials}}\n    <\/div>\n    <div>\n      <h3 style=\"margin: 0; font-size: 1.4em;\">{{characterName}}<\/h3>\n      <div style=\"opacity: 0.8; font-size: 0.9em;\">{{currentDate}} â€¢ {{currentTime}}<\/div>\n    <\/div>\n  <\/div>\n  \n  <!-- Status Banner - This uses computed properties from bundled JS -->\n  <div style=\"\n    background: {{stats.statusColor}};\n    padding: 12px 15px;\n    border-radius: 8px;\n    margin-bottom: 15px;\n    font-weight: bold;\n    text-align: center;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n  \">\n    {{stats.statusIcon}} {{stats.statusTier}} (Readiness: {{stats.readinessScore}})\n  <\/div>\n  \n  <!-- Health Progress Bar -->\n  <div style=\"margin-bottom: 15px;\">\n    <div style=\"display: flex; justify-content: space-between; margin-bottom: 5px;\">\n      <span>Health<\/span>\n      <span>{{stats.health}}%<\/span>\n    <\/div>\n    <div style=\"\n      background: rgba(0,0,0,0.2);\n      border-radius: 10px;\n      height: 20px;\n      overflow: hidden;\n    \">\n      <div style=\"\n        background: linear-gradient(90deg, #2ecc71 0%, #27ae60 100%);\n        height: 100%;\n        width: {{stats.healthPercent}}%;\n        transition: width 0.3s ease;\n      \"><\/div>\n    <\/div>\n  <\/div>\n  \n  <!-- Fatigue Indicator -->\n  <div style=\"margin-bottom: 15px;\">\n    <div style=\"display: flex; justify-content: space-between; margin-bottom: 5px;\">\n      <span>Fatigue<\/span>\n      <span>{{stats.fatigue}}%<\/span>\n    <\/div>\n    <div style=\"\n      background: rgba(0,0,0,0.2);\n      border-radius: 10px;\n      height: 20px;\n      overflow: hidden;\n    \">\n      <div style=\"\n        background: linear-gradient(90deg, #e74c3c 0%, #c0392b 100%);\n        height: 100%;\n        width: {{stats.fatigue}}%;\n        transition: width 0.3s ease;\n      \"><\/div>\n    <\/div>\n  <\/div>\n  \n  <!-- Internal Thought Bubble -->\n  {{#if stats.internal_thought}}\n    <div style=\"\n      background: rgba(255,255,255,0.15);\n      border-left: 4px solid rgba(255,255,255,0.5);\n      padding: 12px 15px;\n      border-radius: 6px;\n      font-style: italic;\n      margin-top: 15px;\n    \">\n      <div style=\"opacity: 0.7; font-size: 0.85em; margin-bottom: 5px;\">ðŸ’­ Thinking...<\/div>\n      <div>{{stats.shortThought}}<\/div>\n      {{#if stats.hasLongThought}}\n        <div style=\"opacity: 0.6; font-size: 0.85em; margin-top: 5px;\">[Thought truncated]<\/div>\n      {{\/if}}\n    <\/div>\n  {{\/if}}\n  \n  <!-- Reaction Emoji -->\n  {{#if reactionEmoji}}\n    <div style=\"\n      text-align: center;\n      font-size: 2em;\n      margin-top: 15px;\n      padding-top: 15px;\n      border-top: 1px solid rgba(255,255,255,0.2);\n    \">\n      {{reactionEmoji}}\n    <\/div>\n  {{\/if}}\n<\/div>\n<!-- CARD_TEMPLATE_END -->",
  "sysPrompt": "# Character Readiness Tracker System Prompt\n\nYou are managing a character readiness tracking system that monitors a character's health, fatigue, and mental state during a roleplay scenario.\n\n## Tracking Fields\n\nYou must track and update the following fields in ```sim code blocks after each response:\n\n### Core Stats\n- **health**: Character's current health level (0-100)\n  - 100 = Perfect health\n  - 50-99 = Minor issues\n  - 25-49 = Significant injuries\n  - 0-24 = Critical condition\n\n- **fatigue**: Character's current fatigue level (0-100)\n  - 0 = Fully rested\n  - 1-30 = Slightly tired\n  - 31-60 = Tired\n  - 61-90 = Exhausted\n  - 91-100 = Critically fatigued\n\n### Mental State\n- **internal_thought**: Character's current internal thoughts and feelings (1-2 sentences reflecting their immediate mental state)\n\n### Visual Customization\n- **bg**: Background color for the tracker card (hex color like #6a5acd)\n- **reactionEmoji**: (Optional) An emoji representing the character's immediate reaction to the last interaction\n\n## Update Rules\n\n1. **After Each Response**: Update all fields based on the narrative events\n2. **Health Changes**: Decrease for injuries, illness, or damage; increase for rest, healing, or medical care\n3. **Fatigue Changes**: Increase for physical\/mental exertion, stress, or time awake; decrease for rest or sleep\n4. **Internal Thoughts**: Should reflect the character's genuine emotional and mental state\n5. **Realistic Progression**: Changes should be gradual and logical based on story events\n\n## Code Block Format\n\nAlways wrap your tracker updates in a code block with the identifier \"sim\":\n\n```sim\nhealth: 85\nfatigue: 45\ninternal_thought: This has been an exhausting day, but I'm managing to push through. I wonder what comes next.\nbg: #4a5f7d\nreactionEmoji: ðŸ˜Š\n```\n\n## Notes\n\n- The readiness score, status tier, and other computed values are automatically calculated by the template\n- Focus on accurately updating the base stats (health, fatigue, thoughts)\n- Health and fatigue should respond realistically to narrative events\n- Internal thoughts add depth and show the character's mental journey",
  "customFields": [
    {
      "key": "health",
      "description": "Character's current health level (0-100)"
    },
    {
      "key": "fatigue",
      "description": "Character's current fatigue level (0-100)"
    },
    {
      "key": "internal_thought",
      "description": "Character's current internal thoughts and feelings"
    },
    {
      "key": "bg",
      "description": "Hex color for card background (e.g., #6a5acd)"
    },
    {
      "key": "reactionEmoji",
      "description": "Optional emoji representing character's immediate reaction"
    }
  ],
  "extSettings": {
    "codeBlockIdentifier": "sim",
    "defaultBgColor": "#6a5acd",
    "showThoughtBubble": false,
    "hideSimBlocks": true,
    "templateFile": "example-bundled-js.html"
  },
  "trackerDesc": "character readiness monitoring with bundled JavaScript computing status tiers and progress bars."
}
